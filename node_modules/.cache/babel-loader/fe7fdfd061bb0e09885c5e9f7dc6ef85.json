{"ast":null,"code":"/* global JsDiff */\n$(function () {\n  $(\".diff-i18n_html, .diff-i18n\").each(function (_index, element) {\n    var diffElement = $(element);\n    var valueElement = diffElement.find(\".diff__value\");\n    var oldValue = valueElement.data(\"old-value\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    var newValue = valueElement.data(\"new-value\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    var diff = JsDiff.diffChars(oldValue, newValue);\n    var outputHTML = \"\";\n    diff.forEach(function (_ref) {\n      var added = _ref.added,\n          removed = _ref.removed,\n          value = _ref.value;\n      var color = \"\";\n\n      if (added) {\n        color = \"#89ffaa\";\n      } else if (removed) {\n        color = \"red\";\n      }\n\n      if (added || removed) {\n        outputHTML += \"<span style=\\\"background-color: \".concat(color, \"\\\">\").concat(value, \"</span>\");\n      } else {\n        outputHTML += value;\n      }\n    });\n    outputHTML = outputHTML.replace(/\\n/g, \"<br><br>\");\n    valueElement.html(outputHTML);\n  });\n});","map":{"version":3,"mappings":"AAAA;AAEAA,CAAC,CAAC,YAAM;EACNA,CAAC,CAAC,6BAAD,CAADA,CAAiCC,IAAjCD,CAAsC,UAASE,MAAT,EAAiBC,OAAjB,EAA0B;IAC9D,IAAMC,WAAW,GAAGJ,CAAC,CAACG,OAAD,CAArB;IACA,IAAME,YAAY,GAAGD,WAAW,CAACE,IAAZF,CAAiB,cAAjBA,CAArB;IACA,IAAMG,QAAQ,GAAGF,YAAY,CAACG,IAAbH,CAAkB,WAAlBA,EAA+BI,OAA/BJ,CAAuC,IAAvCA,EAA6C,MAA7CA,EAAqDI,OAArDJ,CAA6D,IAA7DA,EAAmE,MAAnEA,CAAjB;IACA,IAAMK,QAAQ,GAAGL,YAAY,CAACG,IAAbH,CAAkB,WAAlBA,EAA+BI,OAA/BJ,CAAuC,IAAvCA,EAA6C,MAA7CA,EAAqDI,OAArDJ,CAA6D,IAA7DA,EAAmE,MAAnEA,CAAjB;IAEA,IAAMM,IAAI,GAAGC,MAAM,CAACC,SAAPD,CAAiBL,QAAjBK,EAA2BF,QAA3BE,CAAb;IACA,IAAIE,UAAU,GAAG,EAAjB;IAEAH,IAAI,CAACI,OAALJ,CAAa,gBAA6B;MAAA,IAA3BK,KAA2B,QAA3BA,KAA2B;MAAA,IAApBC,OAAoB,QAApBA,OAAoB;MAAA,IAAXC,KAAW,QAAXA,KAAW;MACxC,IAAIC,KAAK,GAAG,EAAZ;;MAEA,IAAIH,KAAJ,EAAW;QACTG,KAAK,GAAG,SAARA;MADF,OAEO,IAAIF,OAAJ,EAAa;QAClBE,KAAK,GAAG,KAARA;MACD;;MAED,IAAIH,KAAK,IAAIC,OAAb,EAAsB;QACpBH,UAAU,8CAAsCK,KAAtC,gBAAgDD,KAAhD,YAAVJ;MADF,OAEO;QACLA,UAAU,IAAII,KAAdJ;MACD;IAbH;IAgBAA,UAAU,GAAGA,UAAU,CAACL,OAAXK,CAAmB,KAAnBA,EAA0B,UAA1BA,CAAbA;IAEAT,YAAY,CAACe,IAAbf,CAAkBS,UAAlBT;EA3BF;AADD,EAADL","names":["$","each","_index","element","diffElement","valueElement","find","oldValue","data","replace","newValue","diff","JsDiff","diffChars","outputHTML","forEach","added","removed","value","color","html"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-accountability/app/packs/src/decidim/accountability/version_diff.js"],"sourcesContent":["/* global JsDiff */\n\n$(() => {\n  $(\".diff-i18n_html, .diff-i18n\").each(function(_index, element) {\n    const diffElement = $(element);\n    const valueElement = diffElement.find(\".diff__value\");\n    const oldValue = valueElement.data(\"old-value\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    const newValue = valueElement.data(\"new-value\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n\n    const diff = JsDiff.diffChars(oldValue, newValue);\n    let outputHTML = \"\";\n\n    diff.forEach(({added, removed, value}) => {\n      let color = \"\";\n\n      if (added) {\n        color = \"#89ffaa\";\n      } else if (removed) {\n        color = \"red\";\n      }\n\n      if (added || removed) {\n        outputHTML += `<span style=\"background-color: ${color}\">${value}</span>`;\n      } else {\n        outputHTML += value;\n      }\n    });\n\n    outputHTML = outputHTML.replace(/\\n/g, \"<br><br>\");\n\n    valueElement.html(outputHTML);\n  });\n})\n"]},"metadata":{},"sourceType":"module"}