{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n/* eslint-disable */\n\n/*\n  Modified file from the original tribute.js\n  Adding inside click event the conditional if the li element has no disabled-tribute-element class name. if true, then it must continue with normal behaviour.\n*/\n\n\n(function (f) {\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === \"object\" && typeof module !== \"undefined\") {\n    module.exports = f();\n  } else if (typeof define === \"function\" && define.amd) {\n    define([], f);\n  } else {\n    var g;\n\n    if (typeof window !== \"undefined\") {\n      g = window;\n    } else if (typeof global !== \"undefined\") {\n      g = global;\n    } else if (typeof self !== \"undefined\") {\n      g = self;\n    } else {\n      g = this;\n    }\n\n    g.Tribute = f();\n  }\n})(function () {\n  var define, module, exports;\n  return function () {\n    function r(e, n, t) {\n      function o(i, f) {\n        if (!n[i]) {\n          if (!e[i]) {\n            var c = \"function\" == typeof require && require;\n            if (!f && c) return c(i, !0);\n            if (u) return u(i, !0);\n            var a = new Error(\"Cannot find module '\" + i + \"'\");\n            throw a.code = \"MODULE_NOT_FOUND\", a;\n          }\n\n          var p = n[i] = {\n            exports: {}\n          };\n          e[i][0].call(p.exports, function (r) {\n            var n = e[i][1][r];\n            return o(n || r);\n          }, p, p.exports, r, e, n, t);\n        }\n\n        return n[i].exports;\n      }\n\n      for (var u = \"function\" == typeof require && require, i = 0; i < t.length; i++) {\n        o(t[i]);\n      }\n\n      return o;\n    }\n\n    return r;\n  }()({\n    1: [function (require, module, exports) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports[\"default\"] = void 0;\n\n      require(\"./utils\");\n\n      var _TributeEvents = _interopRequireDefault(require(\"./TributeEvents\"));\n\n      var _TributeMenuEvents = _interopRequireDefault(require(\"./TributeMenuEvents\"));\n\n      var _TributeRange = _interopRequireDefault(require(\"./TributeRange\"));\n\n      var _TributeSearch = _interopRequireDefault(require(\"./TributeSearch\"));\n\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n          \"default\": obj\n        };\n      }\n\n      function _slicedToArray(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n      }\n\n      function _nonIterableRest() {\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n      }\n\n      function _iterableToArrayLimit(arr, i) {\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n\n        try {\n          for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n            _arr.push(_s.value);\n\n            if (i && _arr.length === i) break;\n          }\n        } catch (err) {\n          _d = true;\n          _e = err;\n        } finally {\n          try {\n            if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n          } finally {\n            if (_d) throw _e;\n          }\n        }\n\n        return _arr;\n      }\n\n      function _arrayWithHoles(arr) {\n        if (Array.isArray(arr)) return arr;\n      }\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n\n      function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n      }\n\n      var Tribute = /*#__PURE__*/function () {\n        function Tribute(_ref) {\n          var _this = this;\n\n          var _ref$values = _ref.values,\n              values = _ref$values === void 0 ? null : _ref$values,\n              _ref$iframe = _ref.iframe,\n              iframe = _ref$iframe === void 0 ? null : _ref$iframe,\n              _ref$selectClass = _ref.selectClass,\n              selectClass = _ref$selectClass === void 0 ? 'highlight' : _ref$selectClass,\n              _ref$trigger = _ref.trigger,\n              trigger = _ref$trigger === void 0 ? '@' : _ref$trigger,\n              _ref$autocompleteMode = _ref.autocompleteMode,\n              autocompleteMode = _ref$autocompleteMode === void 0 ? false : _ref$autocompleteMode,\n              _ref$selectTemplate = _ref.selectTemplate,\n              selectTemplate = _ref$selectTemplate === void 0 ? null : _ref$selectTemplate,\n              _ref$menuItemTemplate = _ref.menuItemTemplate,\n              menuItemTemplate = _ref$menuItemTemplate === void 0 ? null : _ref$menuItemTemplate,\n              _ref$lookup = _ref.lookup,\n              lookup = _ref$lookup === void 0 ? 'key' : _ref$lookup,\n              _ref$fillAttr = _ref.fillAttr,\n              fillAttr = _ref$fillAttr === void 0 ? 'value' : _ref$fillAttr,\n              _ref$collection = _ref.collection,\n              collection = _ref$collection === void 0 ? null : _ref$collection,\n              _ref$menuContainer = _ref.menuContainer,\n              menuContainer = _ref$menuContainer === void 0 ? null : _ref$menuContainer,\n              _ref$noMatchTemplate = _ref.noMatchTemplate,\n              noMatchTemplate = _ref$noMatchTemplate === void 0 ? null : _ref$noMatchTemplate,\n              _ref$requireLeadingSp = _ref.requireLeadingSpace,\n              requireLeadingSpace = _ref$requireLeadingSp === void 0 ? true : _ref$requireLeadingSp,\n              _ref$allowSpaces = _ref.allowSpaces,\n              allowSpaces = _ref$allowSpaces === void 0 ? false : _ref$allowSpaces,\n              _ref$replaceTextSuffi = _ref.replaceTextSuffix,\n              replaceTextSuffix = _ref$replaceTextSuffi === void 0 ? null : _ref$replaceTextSuffi,\n              _ref$positionMenu = _ref.positionMenu,\n              positionMenu = _ref$positionMenu === void 0 ? true : _ref$positionMenu,\n              _ref$spaceSelectsMatc = _ref.spaceSelectsMatch,\n              spaceSelectsMatch = _ref$spaceSelectsMatc === void 0 ? false : _ref$spaceSelectsMatc,\n              _ref$searchOpts = _ref.searchOpts,\n              searchOpts = _ref$searchOpts === void 0 ? {} : _ref$searchOpts,\n              _ref$menuItemLimit = _ref.menuItemLimit,\n              menuItemLimit = _ref$menuItemLimit === void 0 ? null : _ref$menuItemLimit;\n\n          _classCallCheck(this, Tribute);\n\n          this.autocompleteMode = autocompleteMode;\n          this.menuSelected = 0;\n          this.current = {};\n          this.inputEvent = false;\n          this.isActive = false;\n          this.menuContainer = menuContainer;\n          this.allowSpaces = allowSpaces;\n          this.replaceTextSuffix = replaceTextSuffix;\n          this.positionMenu = positionMenu;\n          this.hasTrailingSpace = false;\n          this.spaceSelectsMatch = spaceSelectsMatch;\n\n          if (this.autocompleteMode) {\n            trigger = '';\n            allowSpaces = false;\n          }\n\n          if (values) {\n            this.collection = [{\n              // symbol that starts the lookup\n              trigger: trigger,\n              // is it wrapped in an iframe\n              iframe: iframe,\n              // class applied to selected item\n              selectClass: selectClass,\n              // function called on select that retuns the content to insert\n              selectTemplate: (selectTemplate || Tribute.defaultSelectTemplate).bind(this),\n              // function called that returns content for an item\n              menuItemTemplate: (menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\n              // function called when menu is empty, disables hiding of menu.\n              noMatchTemplate: function (t) {\n                if (typeof t === 'function') {\n                  return t.bind(_this);\n                }\n\n                return noMatchTemplate || function () {\n                  return '';\n                }.bind(_this);\n              }(noMatchTemplate),\n              // column to search against in the object\n              lookup: lookup,\n              // column that contains the content to insert by default\n              fillAttr: fillAttr,\n              // array of objects or a function returning an array of objects\n              values: values,\n              requireLeadingSpace: requireLeadingSpace,\n              searchOpts: searchOpts,\n              menuItemLimit: menuItemLimit\n            }];\n          } else if (collection) {\n            if (this.autocompleteMode) console.warn('Tribute in autocomplete mode does not work for collections');\n            this.collection = collection.map(function (item) {\n              return {\n                trigger: item.trigger || trigger,\n                iframe: item.iframe || iframe,\n                selectClass: item.selectClass || selectClass,\n                selectTemplate: (item.selectTemplate || Tribute.defaultSelectTemplate).bind(_this),\n                menuItemTemplate: (item.menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(_this),\n                // function called when menu is empty, disables hiding of menu.\n                noMatchTemplate: function (t) {\n                  if (typeof t === 'function') {\n                    return t.bind(_this);\n                  }\n\n                  return null;\n                }(noMatchTemplate),\n                lookup: item.lookup || lookup,\n                fillAttr: item.fillAttr || fillAttr,\n                values: item.values,\n                requireLeadingSpace: item.requireLeadingSpace,\n                searchOpts: item.searchOpts || searchOpts,\n                menuItemLimit: item.menuItemLimit || menuItemLimit\n              };\n            });\n          } else {\n            throw new Error('[Tribute] No collection specified.');\n          }\n\n          new _TributeRange[\"default\"](this);\n          new _TributeEvents[\"default\"](this);\n          new _TributeMenuEvents[\"default\"](this);\n          new _TributeSearch[\"default\"](this);\n        }\n\n        _createClass(Tribute, [{\n          key: \"triggers\",\n          value: function triggers() {\n            return this.collection.map(function (config) {\n              return config.trigger;\n            });\n          }\n        }, {\n          key: \"attach\",\n          value: function attach(el) {\n            if (!el) {\n              throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n            } // Check if it is a jQuery collection\n\n\n            if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n              el = el.get();\n            } // Is el an Array/Array-like object?\n\n\n            if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n              var length = el.length;\n\n              for (var i = 0; i < length; ++i) {\n                this._attach(el[i]);\n              }\n            } else {\n              this._attach(el);\n            }\n          }\n        }, {\n          key: \"_attach\",\n          value: function _attach(el) {\n            if (el.hasAttribute('data-tribute')) {\n              console.warn('Tribute was already bound to ' + el.nodeName);\n            }\n\n            this.ensureEditable(el);\n            this.events.bind(el);\n            el.setAttribute('data-tribute', true);\n          }\n        }, {\n          key: \"ensureEditable\",\n          value: function ensureEditable(element) {\n            if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\n              if (element.contentEditable) {\n                element.contentEditable = true;\n              } else {\n                throw new Error('[Tribute] Cannot bind to ' + element.nodeName);\n              }\n            }\n          }\n        }, {\n          key: \"createMenu\",\n          value: function createMenu() {\n            var wrapper = this.range.getDocument().createElement('div'),\n                ul = this.range.getDocument().createElement('ul');\n            wrapper.className = 'tribute-container';\n            wrapper.setAttribute('aria-expanded', 'true');\n            ul.setAttribute('id', 'results');\n            wrapper.appendChild(ul);\n\n            if (this.menuContainer) {\n              return this.menuContainer.appendChild(wrapper);\n            }\n\n            return this.range.getDocument().body.appendChild(wrapper);\n          }\n        }, {\n          key: \"showMenuFor\",\n          value: function showMenuFor(element, scrollTo) {\n            var _this2 = this; // Only proceed if menu isn't already shown for the current element & mentionText\n\n\n            if (this.isActive && this.current.element === element && this.current.mentionText === this.currentMentionTextSnapshot) {\n              return;\n            }\n\n            this.currentMentionTextSnapshot = this.current.mentionText; // create the menu if it doesn't exist.\n\n            if (!this.menu) {\n              this.menu = this.createMenu();\n              element.tributeMenu = this.menu;\n              this.menuEvents.bind(this.menu);\n            }\n\n            this.isActive = true;\n            this.menuSelected = 0;\n\n            if (!this.current.mentionText) {\n              this.current.mentionText = '';\n            }\n\n            var processValues = function processValues(values) {\n              // Tribute may not be active any more by the time the value callback returns\n              if (!_this2.isActive) {\n                return;\n              }\n\n              var items = _this2.search.filter(_this2.current.mentionText, values, {\n                pre: _this2.current.collection.searchOpts.pre || '<span>',\n                post: _this2.current.collection.searchOpts.post || '</span>',\n                skip: _this2.current.collection.searchOpts.skip,\n                extract: function extract(el) {\n                  if (typeof _this2.current.collection.lookup === 'string') {\n                    return el[_this2.current.collection.lookup];\n                  } else if (typeof _this2.current.collection.lookup === 'function') {\n                    return _this2.current.collection.lookup(el, _this2.current.mentionText);\n                  } else {\n                    throw new Error('Invalid lookup attribute, lookup must be string or function.');\n                  }\n                }\n              });\n\n              if (_this2.current.collection.menuItemLimit) {\n                items = items.slice(0, _this2.current.collection.menuItemLimit);\n              }\n\n              _this2.current.filteredItems = items;\n\n              var ul = _this2.menu.querySelector('ul');\n\n              _this2.range.positionMenuAtCaret(scrollTo);\n\n              if (!items.length) {\n                var noMatchEvent = new CustomEvent('tribute-no-match', {\n                  detail: _this2.menu\n                });\n\n                _this2.current.element.dispatchEvent(noMatchEvent);\n\n                if (typeof _this2.current.collection.noMatchTemplate === 'function' && !_this2.current.collection.noMatchTemplate() || !_this2.current.collection.noMatchTemplate) {\n                  _this2.hideMenu();\n                } else {\n                  typeof _this2.current.collection.noMatchTemplate === 'function' ? ul.innerHTML = _this2.current.collection.noMatchTemplate() : ul.innerHTML = _this2.current.collection.noMatchTemplate;\n                }\n\n                return;\n              }\n\n              ul.innerHTML = '';\n\n              var fragment = _this2.range.getDocument().createDocumentFragment();\n\n              items.forEach(function (item, index) {\n                var li = _this2.range.getDocument().createElement('li');\n\n                li.setAttribute('role', 'option');\n                li.setAttribute('data-index', index);\n                li.addEventListener('mousemove', function (e) {\n                  var _this2$_findLiTarget = _this2._findLiTarget(e.target),\n                      _this2$_findLiTarget2 = _slicedToArray(_this2$_findLiTarget, 2),\n                      li = _this2$_findLiTarget2[0],\n                      index = _this2$_findLiTarget2[1];\n\n                  if (e.movementY !== 0) {\n                    _this2.events.setActiveLi(index);\n                  }\n                });\n\n                if (_this2.menuSelected === index) {\n                  li.className = _this2.current.collection.selectClass;\n                }\n\n                li.innerHTML = _this2.current.collection.menuItemTemplate(item);\n                fragment.appendChild(li);\n              });\n              ul.appendChild(fragment);\n            };\n\n            if (typeof this.current.collection.values === 'function') {\n              this.current.collection.values(this.current.mentionText, processValues);\n            } else {\n              processValues(this.current.collection.values);\n            }\n          }\n        }, {\n          key: \"_findLiTarget\",\n          value: function _findLiTarget(el) {\n            if (!el) return [];\n            var index = el.getAttribute('data-index');\n            return !index ? this._findLiTarget(el.parentNode) : [el, index];\n          }\n        }, {\n          key: \"showMenuForCollection\",\n          value: function showMenuForCollection(element, collectionIndex) {\n            if (element !== document.activeElement) {\n              this.placeCaretAtEnd(element);\n            }\n\n            this.current.collection = this.collection[collectionIndex || 0];\n            this.current.externalTrigger = true;\n            this.current.element = element;\n            if (element.isContentEditable) this.insertTextAtCursor(this.current.collection.trigger);else this.insertAtCaret(element, this.current.collection.trigger);\n            this.showMenuFor(element);\n          } // TODO: make sure this works for inputs/textareas\n\n        }, {\n          key: \"placeCaretAtEnd\",\n          value: function placeCaretAtEnd(el) {\n            el.focus();\n\n            if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n              var range = document.createRange();\n              range.selectNodeContents(el);\n              range.collapse(false);\n              var sel = window.getSelection();\n              sel.removeAllRanges();\n              sel.addRange(range);\n            } else if (typeof document.body.createTextRange != \"undefined\") {\n              var textRange = document.body.createTextRange();\n              textRange.moveToElementText(el);\n              textRange.collapse(false);\n              textRange.select();\n            }\n          } // for contenteditable\n\n        }, {\n          key: \"insertTextAtCursor\",\n          value: function insertTextAtCursor(text) {\n            var sel, range, html;\n            sel = window.getSelection();\n            range = sel.getRangeAt(0);\n            range.deleteContents();\n            var textNode = document.createTextNode(text);\n            range.insertNode(textNode);\n            range.selectNodeContents(textNode);\n            range.collapse(false);\n            sel.removeAllRanges();\n            sel.addRange(range);\n          } // for regular inputs\n\n        }, {\n          key: \"insertAtCaret\",\n          value: function insertAtCaret(textarea, text) {\n            var scrollPos = textarea.scrollTop;\n            var caretPos = textarea.selectionStart;\n            var front = textarea.value.substring(0, caretPos);\n            var back = textarea.value.substring(textarea.selectionEnd, textarea.value.length);\n            textarea.value = front + text + back;\n            caretPos = caretPos + text.length;\n            textarea.selectionStart = caretPos;\n            textarea.selectionEnd = caretPos;\n            textarea.focus();\n            textarea.scrollTop = scrollPos;\n          }\n        }, {\n          key: \"hideMenu\",\n          value: function hideMenu() {\n            if (this.menu) {\n              this.menu.style.cssText = 'display: none;';\n              this.isActive = false;\n              this.menuSelected = 0;\n              this.current = {};\n            }\n          }\n        }, {\n          key: \"selectItemAtIndex\",\n          value: function selectItemAtIndex(index, originalEvent) {\n            index = parseInt(index);\n            if (typeof index !== 'number' || isNaN(index)) return;\n            var item = this.current.filteredItems[index];\n            var content = this.current.collection.selectTemplate(item);\n            if (content !== null) this.replaceText(content, originalEvent, item);\n          }\n        }, {\n          key: \"replaceText\",\n          value: function replaceText(content, originalEvent, item) {\n            this.range.replaceTriggerText(content, true, true, originalEvent, item);\n          }\n        }, {\n          key: \"_append\",\n          value: function _append(collection, newValues, replace) {\n            if (typeof collection.values === 'function') {\n              throw new Error('Unable to append to values, as it is a function.');\n            } else if (!replace) {\n              collection.values = collection.values.concat(newValues);\n            } else {\n              collection.values = newValues;\n            }\n          }\n        }, {\n          key: \"append\",\n          value: function append(collectionIndex, newValues, replace) {\n            var index = parseInt(collectionIndex);\n            if (typeof index !== 'number') throw new Error('please provide an index for the collection to update.');\n            var collection = this.collection[index];\n\n            this._append(collection, newValues, replace);\n          }\n        }, {\n          key: \"appendCurrent\",\n          value: function appendCurrent(newValues, replace) {\n            if (this.isActive) {\n              this._append(this.current.collection, newValues, replace);\n            } else {\n              throw new Error('No active state. Please use append instead and pass an index.');\n            }\n          }\n        }, {\n          key: \"detach\",\n          value: function detach(el) {\n            if (!el) {\n              throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n            } // Check if it is a jQuery collection\n\n\n            if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n              el = el.get();\n            } // Is el an Array/Array-like object?\n\n\n            if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n              var length = el.length;\n\n              for (var i = 0; i < length; ++i) {\n                this._detach(el[i]);\n              }\n            } else {\n              this._detach(el);\n            }\n          }\n        }, {\n          key: \"_detach\",\n          value: function _detach(el) {\n            var _this3 = this;\n\n            this.events.unbind(el);\n\n            if (el.tributeMenu) {\n              this.menuEvents.unbind(el.tributeMenu);\n            }\n\n            setTimeout(function () {\n              el.removeAttribute('data-tribute');\n              _this3.isActive = false;\n\n              if (el.tributeMenu) {\n                el.tributeMenu.remove();\n              }\n            });\n          }\n        }], [{\n          key: \"defaultSelectTemplate\",\n          value: function defaultSelectTemplate(item) {\n            if (typeof item === 'undefined') return null;\n\n            if (this.range.isContentEditable(this.current.element)) {\n              return '<span class=\"tribute-mention\">' + (this.current.collection.trigger + item.original[this.current.collection.fillAttr]) + '</span>';\n            }\n\n            return this.current.collection.trigger + item.original[this.current.collection.fillAttr];\n          }\n        }, {\n          key: \"defaultMenuItemTemplate\",\n          value: function defaultMenuItemTemplate(matchItem) {\n            return matchItem.string;\n          }\n        }, {\n          key: \"inputTypes\",\n          value: function inputTypes() {\n            return ['TEXTAREA', 'INPUT'];\n          }\n        }]);\n\n        return Tribute;\n      }();\n\n      var _default = Tribute;\n      exports[\"default\"] = _default;\n      module.exports = exports[\"default\"];\n    }, {\n      \"./TributeEvents\": 2,\n      \"./TributeMenuEvents\": 3,\n      \"./TributeRange\": 4,\n      \"./TributeSearch\": 5,\n      \"./utils\": 7\n    }],\n    2: [function (require, module, exports) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports[\"default\"] = void 0;\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n\n      function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n      }\n\n      var TributeEvents = /*#__PURE__*/function () {\n        function TributeEvents(tribute) {\n          _classCallCheck(this, TributeEvents);\n\n          this.tribute = tribute;\n          this.tribute.events = this;\n        }\n\n        _createClass(TributeEvents, [{\n          key: \"bind\",\n          value: function bind(element) {\n            element.boundKeydown = this.keydown.bind(element, this);\n            element.boundKeyup = this.keyup.bind(element, this);\n            element.boundInput = this.input.bind(element, this);\n            element.addEventListener('keydown', element.boundKeydown, false);\n            element.addEventListener('keyup', element.boundKeyup, false);\n            element.addEventListener('input', element.boundInput, false);\n          }\n        }, {\n          key: \"unbind\",\n          value: function unbind(element) {\n            element.removeEventListener('keydown', element.boundKeydown, false);\n            element.removeEventListener('keyup', element.boundKeyup, false);\n            element.removeEventListener('input', element.boundInput, false);\n            delete element.boundKeydown;\n            delete element.boundKeyup;\n            delete element.boundInput;\n          }\n        }, {\n          key: \"keydown\",\n          value: function keydown(instance, event) {\n            if (instance.shouldDeactivate(event)) {\n              instance.tribute.isActive = false;\n              instance.tribute.hideMenu();\n            }\n\n            var element = this;\n            instance.commandEvent = false;\n            TributeEvents.keys().forEach(function (o) {\n              if (o.key === event.keyCode) {\n                instance.commandEvent = true;\n                instance.callbacks()[o.value.toLowerCase()](event, element);\n              }\n            });\n          }\n        }, {\n          key: \"input\",\n          value: function input(instance, event) {\n            instance.inputEvent = true;\n            instance.keyup.call(this, instance, event);\n          }\n        }, {\n          key: \"click\",\n          value: function click(instance, event) {\n            var tribute = instance.tribute;\n\n            if (tribute.menu && tribute.menu.contains(event.target)) {\n              var li = event.target;\n              event.preventDefault();\n              event.stopPropagation();\n\n              while (li.nodeName.toLowerCase() !== 'li') {\n                li = li.parentNode;\n\n                if (!li || li === tribute.menu) {\n                  throw new Error('cannot find the <li> container for the click');\n                }\n              }\n\n              if (li.getElementsByClassName(\"disabled-tribute-element\")[0] == undefined) {\n                tribute.selectItemAtIndex(li.getAttribute('data-index'), event);\n                tribute.hideMenu(); // TODO: should fire with externalTrigger and target is outside of menu\n              }\n            } else if (tribute.current.element && !tribute.current.externalTrigger) {\n              tribute.current.externalTrigger = false;\n              setTimeout(function () {\n                return tribute.hideMenu();\n              });\n            }\n          }\n        }, {\n          key: \"keyup\",\n          value: function keyup(instance, event) {\n            if (instance.inputEvent) {\n              instance.inputEvent = false;\n            }\n\n            instance.updateSelection(this);\n            if (event.keyCode === 27) return;\n\n            if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\n              instance.tribute.hasTrailingSpace = false;\n              instance.commandEvent = true;\n              instance.callbacks()[\"space\"](event, this);\n              return;\n            }\n\n            if (!instance.tribute.isActive) {\n              if (instance.tribute.autocompleteMode) {\n                instance.callbacks().triggerChar(event, this, '');\n              } else {\n                var keyCode = instance.getKeyCode(instance, this, event);\n                if (isNaN(keyCode) || !keyCode) return;\n                var trigger = instance.tribute.triggers().find(function (trigger) {\n                  return trigger.charCodeAt(0) === keyCode;\n                });\n\n                if (typeof trigger !== 'undefined') {\n                  instance.callbacks().triggerChar(event, this, trigger);\n                }\n              }\n            }\n\n            if ((instance.tribute.current.trigger || instance.tribute.autocompleteMode) && instance.commandEvent === false || instance.tribute.isActive && event.keyCode === 8) {\n              instance.tribute.showMenuFor(this, true);\n            }\n          }\n        }, {\n          key: \"shouldDeactivate\",\n          value: function shouldDeactivate(event) {\n            if (!this.tribute.isActive) return false;\n\n            if (this.tribute.current.mentionText.length === 0) {\n              var eventKeyPressed = false;\n              TributeEvents.keys().forEach(function (o) {\n                if (event.keyCode === o.key) eventKeyPressed = true;\n              });\n              return !eventKeyPressed;\n            }\n\n            return false;\n          }\n        }, {\n          key: \"getKeyCode\",\n          value: function getKeyCode(instance, el, event) {\n            var _char;\n\n            var tribute = instance.tribute;\n            var info = tribute.range.getTriggerInfo(false, tribute.hasTrailingSpace, true, tribute.allowSpaces, tribute.autocompleteMode);\n\n            if (info) {\n              return info.mentionTriggerChar.charCodeAt(0);\n            } else {\n              return false;\n            }\n          }\n        }, {\n          key: \"updateSelection\",\n          value: function updateSelection(el) {\n            this.tribute.current.element = el;\n            var info = this.tribute.range.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n            if (info) {\n              this.tribute.current.selectedPath = info.mentionSelectedPath;\n              this.tribute.current.mentionText = info.mentionText;\n              this.tribute.current.selectedOffset = info.mentionSelectedOffset;\n            }\n          }\n        }, {\n          key: \"callbacks\",\n          value: function callbacks() {\n            var _this = this;\n\n            return {\n              triggerChar: function triggerChar(e, el, trigger) {\n                var tribute = _this.tribute;\n                tribute.current.trigger = trigger;\n                var collectionItem = tribute.collection.find(function (item) {\n                  return item.trigger === trigger;\n                });\n                tribute.current.collection = collectionItem;\n                if (tribute.inputEvent) tribute.showMenuFor(el, true);\n              },\n              enter: function enter(e, el) {\n                // choose selection\n                if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  setTimeout(function () {\n                    _this.tribute.selectItemAtIndex(_this.tribute.menuSelected, e);\n\n                    _this.tribute.hideMenu();\n                  }, 0);\n                }\n              },\n              escape: function escape(e, el) {\n                if (_this.tribute.isActive) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  _this.tribute.isActive = false;\n\n                  _this.tribute.hideMenu();\n                }\n              },\n              tab: function tab(e, el) {\n                // choose first match\n                _this.callbacks().enter(e, el);\n              },\n              space: function space(e, el) {\n                if (_this.tribute.isActive) {\n                  if (_this.tribute.spaceSelectsMatch) {\n                    _this.callbacks().enter(e, el);\n                  } else if (!_this.tribute.allowSpaces) {\n                    e.stopPropagation();\n                    setTimeout(function () {\n                      _this.tribute.hideMenu();\n\n                      _this.tribute.isActive = false;\n                    }, 0);\n                  }\n                }\n              },\n              up: function up(e, el) {\n                // navigate up ul\n                if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  var count = _this.tribute.current.filteredItems.length,\n                      selected = _this.tribute.menuSelected;\n\n                  if (count > selected && selected > 0) {\n                    _this.tribute.menuSelected--;\n\n                    _this.setActiveLi();\n                  } else if (selected === 0) {\n                    _this.tribute.menuSelected = count - 1;\n\n                    _this.setActiveLi();\n\n                    _this.tribute.menu.scrollTop = _this.tribute.menu.scrollHeight;\n                  }\n                }\n              },\n              down: function down(e, el) {\n                // navigate down ul\n                if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  var count = _this.tribute.current.filteredItems.length - 1,\n                      selected = _this.tribute.menuSelected;\n\n                  if (count > selected) {\n                    _this.tribute.menuSelected++;\n\n                    _this.setActiveLi();\n                  } else if (count === selected) {\n                    _this.tribute.menuSelected = 0;\n\n                    _this.setActiveLi();\n\n                    _this.tribute.menu.scrollTop = 0;\n                  }\n                }\n              },\n              \"delete\": function _delete(e, el) {\n                if (_this.tribute.isActive && _this.tribute.current.mentionText.length < 1) {\n                  _this.tribute.hideMenu();\n                } else if (_this.tribute.isActive) {\n                  _this.tribute.showMenuFor(el);\n                }\n              }\n            };\n          }\n        }, {\n          key: \"setActiveLi\",\n          value: function setActiveLi(index) {\n            var lis = this.tribute.menu.querySelectorAll('li'),\n                length = lis.length >>> 0;\n            if (index) this.tribute.menuSelected = parseInt(index);\n\n            for (var i = 0; i < length; i++) {\n              var li = lis[i];\n\n              if (i === this.tribute.menuSelected) {\n                li.classList.add(this.tribute.current.collection.selectClass);\n                var liClientRect = li.getBoundingClientRect();\n                var menuClientRect = this.tribute.menu.getBoundingClientRect();\n\n                if (liClientRect.bottom > menuClientRect.bottom) {\n                  var scrollDistance = liClientRect.bottom - menuClientRect.bottom;\n                  this.tribute.menu.scrollTop += scrollDistance;\n                } else if (liClientRect.top < menuClientRect.top) {\n                  var _scrollDistance = menuClientRect.top - liClientRect.top;\n\n                  this.tribute.menu.scrollTop -= _scrollDistance;\n                }\n              } else {\n                li.classList.remove(this.tribute.current.collection.selectClass);\n              }\n            }\n          }\n        }, {\n          key: \"getFullHeight\",\n          value: function getFullHeight(elem, includeMargin) {\n            var height = elem.getBoundingClientRect().height;\n\n            if (includeMargin) {\n              var style = elem.currentStyle || window.getComputedStyle(elem);\n              return height + parseFloat(style.marginTop) + parseFloat(style.marginBottom);\n            }\n\n            return height;\n          }\n        }], [{\n          key: \"keys\",\n          value: function keys() {\n            return [{\n              key: 9,\n              value: 'TAB'\n            }, {\n              key: 8,\n              value: 'DELETE'\n            }, {\n              key: 13,\n              value: 'ENTER'\n            }, {\n              key: 27,\n              value: 'ESCAPE'\n            }, {\n              key: 32,\n              value: 'SPACE'\n            }, {\n              key: 38,\n              value: 'UP'\n            }, {\n              key: 40,\n              value: 'DOWN'\n            }];\n          }\n        }]);\n\n        return TributeEvents;\n      }();\n\n      var _default = TributeEvents;\n      exports[\"default\"] = _default;\n      module.exports = exports[\"default\"];\n    }, {}],\n    3: [function (require, module, exports) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports[\"default\"] = void 0;\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n\n      function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n      }\n\n      var TributeMenuEvents = /*#__PURE__*/function () {\n        function TributeMenuEvents(tribute) {\n          _classCallCheck(this, TributeMenuEvents);\n\n          this.tribute = tribute;\n          this.tribute.menuEvents = this;\n          this.menu = this.tribute.menu;\n        }\n\n        _createClass(TributeMenuEvents, [{\n          key: \"bind\",\n          value: function bind(menu) {\n            var _this = this;\n\n            this.menuClickEvent = this.tribute.events.click.bind(null, this);\n            this.menuContainerScrollEvent = this.debounce(function () {\n              if (_this.tribute.isActive) {\n                _this.tribute.showMenuFor(_this.tribute.current.element, false);\n              }\n            }, 300, false);\n            this.windowResizeEvent = this.debounce(function () {\n              if (_this.tribute.isActive) {\n                _this.tribute.range.positionMenuAtCaret(true);\n              }\n            }, 300, false); // fixes IE11 issues with mousedown\n\n            this.tribute.range.getDocument().addEventListener('MSPointerDown', this.menuClickEvent, false);\n            this.tribute.range.getDocument().addEventListener('mousedown', this.menuClickEvent, false);\n            window.addEventListener('resize', this.windowResizeEvent);\n\n            if (this.menuContainer) {\n              this.menuContainer.addEventListener('scroll', this.menuContainerScrollEvent, false);\n            } else {\n              window.addEventListener('scroll', this.menuContainerScrollEvent);\n            }\n          }\n        }, {\n          key: \"unbind\",\n          value: function unbind(menu) {\n            this.tribute.range.getDocument().removeEventListener('mousedown', this.menuClickEvent, false);\n            this.tribute.range.getDocument().removeEventListener('MSPointerDown', this.menuClickEvent, false);\n            window.removeEventListener('resize', this.windowResizeEvent);\n\n            if (this.menuContainer) {\n              this.menuContainer.removeEventListener('scroll', this.menuContainerScrollEvent, false);\n            } else {\n              window.removeEventListener('scroll', this.menuContainerScrollEvent);\n            }\n          }\n        }, {\n          key: \"debounce\",\n          value: function debounce(func, wait, immediate) {\n            var _this2 = this,\n                _arguments = arguments;\n\n            var timeout;\n            return function () {\n              var context = _this2,\n                  args = _arguments;\n\n              var later = function later() {\n                timeout = null;\n                if (!immediate) func.apply(context, args);\n              };\n\n              var callNow = immediate && !timeout;\n              clearTimeout(timeout);\n              timeout = setTimeout(later, wait);\n              if (callNow) func.apply(context, args);\n            };\n          }\n        }]);\n\n        return TributeMenuEvents;\n      }();\n\n      var _default = TributeMenuEvents;\n      exports[\"default\"] = _default;\n      module.exports = exports[\"default\"];\n    }, {}],\n    4: [function (require, module, exports) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports[\"default\"] = void 0;\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n\n      function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n      } // Thanks to https://github.com/jeff-collins/ment.io\n\n\n      var TributeRange = /*#__PURE__*/function () {\n        function TributeRange(tribute) {\n          _classCallCheck(this, TributeRange);\n\n          this.tribute = tribute;\n          this.tribute.range = this;\n        }\n\n        _createClass(TributeRange, [{\n          key: \"getDocument\",\n          value: function getDocument() {\n            var iframe;\n\n            if (this.tribute.current.collection) {\n              iframe = this.tribute.current.collection.iframe;\n            }\n\n            if (!iframe) {\n              return document;\n            }\n\n            return iframe.contentWindow.document;\n          }\n        }, {\n          key: \"positionMenuAtCaret\",\n          value: function positionMenuAtCaret(scrollTo) {\n            var _this = this;\n\n            var context = this.tribute.current,\n                coordinates;\n            var info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n            if (typeof info !== 'undefined') {\n              if (!this.tribute.positionMenu) {\n                this.tribute.menu.style.cssText = \"display: block;\";\n                return;\n              }\n\n              if (!this.isContentEditable(context.element)) {\n                coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element, info.mentionPosition);\n              } else {\n                coordinates = this.getContentEditableCaretPosition(info.mentionPosition);\n              }\n\n              this.tribute.menu.style.cssText = \"top: \".concat(coordinates.top, \"px;\\n                                     left: \").concat(coordinates.left, \"px;\\n                                     right: \").concat(coordinates.right, \"px;\\n                                     bottom: \").concat(coordinates.bottom, \"px;\\n                                     position: absolute;\\n                                     display: block;\");\n\n              if (coordinates.left === 'auto') {\n                this.tribute.menu.style.left = 'auto';\n              }\n\n              if (coordinates.top === 'auto') {\n                this.tribute.menu.style.top = 'auto';\n              }\n\n              if (scrollTo) this.scrollIntoView();\n              window.setTimeout(function () {\n                var menuDimensions = {\n                  width: _this.tribute.menu.offsetWidth,\n                  height: _this.tribute.menu.offsetHeight\n                };\n\n                var menuIsOffScreen = _this.isMenuOffScreen(coordinates, menuDimensions);\n\n                var menuIsOffScreenHorizontally = window.innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right);\n                var menuIsOffScreenVertically = window.innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom);\n\n                if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\n                  _this.tribute.menu.style.cssText = 'display: none';\n\n                  _this.positionMenuAtCaret(scrollTo);\n                }\n              }, 0);\n            } else {\n              this.tribute.menu.style.cssText = 'display: none';\n            }\n          }\n        }, {\n          key: \"selectElement\",\n          value: function selectElement(targetElement, path, offset) {\n            var range;\n            var elem = targetElement;\n\n            if (path) {\n              for (var i = 0; i < path.length; i++) {\n                elem = elem.childNodes[path[i]];\n\n                if (elem === undefined) {\n                  return;\n                }\n\n                while (elem.length < offset) {\n                  offset -= elem.length;\n                  elem = elem.nextSibling;\n                }\n\n                if (elem.childNodes.length === 0 && !elem.length) {\n                  elem = elem.previousSibling;\n                }\n              }\n            }\n\n            var sel = this.getWindowSelection();\n            range = this.getDocument().createRange();\n            range.setStart(elem, offset);\n            range.setEnd(elem, offset);\n            range.collapse(true);\n\n            try {\n              sel.removeAllRanges();\n            } catch (error) {}\n\n            sel.addRange(range);\n            targetElement.focus();\n          }\n        }, {\n          key: \"replaceTriggerText\",\n          value: function replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\n            var info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n            if (info !== undefined) {\n              var context = this.tribute.current;\n              var replaceEvent = new CustomEvent('tribute-replaced', {\n                detail: {\n                  item: item,\n                  instance: context,\n                  context: info,\n                  event: originalEvent\n                }\n              });\n\n              if (!this.isContentEditable(context.element)) {\n                var myField = this.tribute.current.element;\n                var textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : ' ';\n                text += textSuffix;\n                var startPos = info.mentionPosition;\n                var endPos = info.mentionPosition + info.mentionText.length + textSuffix.length;\n                myField.value = myField.value.substring(0, startPos) + text + myField.value.substring(endPos, myField.value.length);\n                myField.selectionStart = startPos + text.length;\n                myField.selectionEnd = startPos + text.length;\n              } else {\n                // add a space to the end of the pasted text\n                var _textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : '\\xA0';\n\n                text += _textSuffix;\n                this.pasteHtml(text, info.mentionPosition, info.mentionPosition + info.mentionText.length + !this.tribute.autocompleteMode);\n              }\n\n              context.element.dispatchEvent(replaceEvent);\n            }\n          }\n        }, {\n          key: \"pasteHtml\",\n          value: function pasteHtml(html, startPos, endPos) {\n            var range, sel;\n            sel = this.getWindowSelection();\n            range = this.getDocument().createRange();\n            range.setStart(sel.anchorNode, startPos);\n            range.setEnd(sel.anchorNode, endPos);\n            range.deleteContents();\n            var el = this.getDocument().createElement('div');\n            el.innerHTML = html;\n            var frag = this.getDocument().createDocumentFragment(),\n                node,\n                lastNode;\n\n            while (node = el.firstChild) {\n              lastNode = frag.appendChild(node);\n            }\n\n            range.insertNode(frag); // Preserve the selection\n\n            if (lastNode) {\n              range = range.cloneRange();\n              range.setStartAfter(lastNode);\n              range.collapse(true);\n              sel.removeAllRanges();\n              sel.addRange(range);\n            }\n          }\n        }, {\n          key: \"getWindowSelection\",\n          value: function getWindowSelection() {\n            if (this.tribute.collection.iframe) {\n              return this.tribute.collection.iframe.contentWindow.getSelection();\n            }\n\n            return window.getSelection();\n          }\n        }, {\n          key: \"getNodePositionInParent\",\n          value: function getNodePositionInParent(element) {\n            if (element.parentNode === null) {\n              return 0;\n            }\n\n            for (var i = 0; i < element.parentNode.childNodes.length; i++) {\n              var node = element.parentNode.childNodes[i];\n\n              if (node === element) {\n                return i;\n              }\n            }\n          }\n        }, {\n          key: \"getContentEditableSelectedPath\",\n          value: function getContentEditableSelectedPath(ctx) {\n            var sel = this.getWindowSelection();\n            var selected = sel.anchorNode;\n            var path = [];\n            var offset;\n\n            if (selected != null) {\n              var i;\n              var ce = selected.contentEditable;\n\n              while (selected !== null && ce !== 'true') {\n                i = this.getNodePositionInParent(selected);\n                path.push(i);\n                selected = selected.parentNode;\n\n                if (selected !== null) {\n                  ce = selected.contentEditable;\n                }\n              }\n\n              path.reverse(); // getRangeAt may not exist, need alternative\n\n              offset = sel.getRangeAt(0).startOffset;\n              return {\n                selected: selected,\n                path: path,\n                offset: offset\n              };\n            }\n          }\n        }, {\n          key: \"getTextPrecedingCurrentSelection\",\n          value: function getTextPrecedingCurrentSelection() {\n            var context = this.tribute.current,\n                text = '';\n\n            if (!this.isContentEditable(context.element)) {\n              var textComponent = this.tribute.current.element;\n\n              if (textComponent) {\n                var startPos = textComponent.selectionStart;\n\n                if (textComponent.value && startPos >= 0) {\n                  text = textComponent.value.substring(0, startPos);\n                }\n              }\n            } else {\n              var selectedElem = this.getWindowSelection().anchorNode;\n\n              if (selectedElem != null) {\n                var workingNodeContent = selectedElem.textContent;\n                var selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset;\n\n                if (workingNodeContent && selectStartOffset >= 0) {\n                  text = workingNodeContent.substring(0, selectStartOffset);\n                }\n              }\n            }\n\n            return text;\n          }\n        }, {\n          key: \"getLastWordInText\",\n          value: function getLastWordInText(text) {\n            text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\n\n            var wordsArray = text.split(/\\s+/);\n            var worldsCount = wordsArray.length - 1;\n            return wordsArray[worldsCount].trim();\n          }\n        }, {\n          key: \"getTriggerInfo\",\n          value: function getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\n            var _this2 = this;\n\n            var ctx = this.tribute.current;\n            var selected, path, offset;\n\n            if (!this.isContentEditable(ctx.element)) {\n              selected = this.tribute.current.element;\n            } else {\n              var selectionInfo = this.getContentEditableSelectedPath(ctx);\n\n              if (selectionInfo) {\n                selected = selectionInfo.selected;\n                path = selectionInfo.path;\n                offset = selectionInfo.offset;\n              }\n            }\n\n            var effectiveRange = this.getTextPrecedingCurrentSelection();\n            var lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange);\n\n            if (isAutocomplete) {\n              return {\n                mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\n                mentionText: lastWordOfEffectiveRange,\n                mentionSelectedElement: selected,\n                mentionSelectedPath: path,\n                mentionSelectedOffset: offset\n              };\n            }\n\n            if (effectiveRange !== undefined && effectiveRange !== null) {\n              var mostRecentTriggerCharPos = -1;\n              var triggerChar;\n              this.tribute.collection.forEach(function (config) {\n                var c = config.trigger;\n                var idx = config.requireLeadingSpace ? _this2.lastIndexWithLeadingSpace(effectiveRange, c) : effectiveRange.lastIndexOf(c);\n\n                if (idx > mostRecentTriggerCharPos) {\n                  mostRecentTriggerCharPos = idx;\n                  triggerChar = c;\n                  requireLeadingSpace = config.requireLeadingSpace;\n                }\n              });\n\n              if (mostRecentTriggerCharPos >= 0 && (mostRecentTriggerCharPos === 0 || !requireLeadingSpace || /[\\xA0\\s]/g.test(effectiveRange.substring(mostRecentTriggerCharPos - 1, mostRecentTriggerCharPos)))) {\n                var currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + 1, effectiveRange.length);\n                triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + 1);\n                var firstSnippetChar = currentTriggerSnippet.substring(0, 1);\n                var leadingSpace = currentTriggerSnippet.length > 0 && (firstSnippetChar === ' ' || firstSnippetChar === '\\xA0');\n\n                if (hasTrailingSpace) {\n                  currentTriggerSnippet = currentTriggerSnippet.trim();\n                }\n\n                var regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\n                this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\n\n                if (!leadingSpace && (menuAlreadyActive || !regex.test(currentTriggerSnippet))) {\n                  return {\n                    mentionPosition: mostRecentTriggerCharPos,\n                    mentionText: currentTriggerSnippet,\n                    mentionSelectedElement: selected,\n                    mentionSelectedPath: path,\n                    mentionSelectedOffset: offset,\n                    mentionTriggerChar: triggerChar\n                  };\n                }\n              }\n            }\n          }\n        }, {\n          key: \"lastIndexWithLeadingSpace\",\n          value: function lastIndexWithLeadingSpace(str, _char) {\n            var reversedStr = str.split('').reverse().join('');\n            var index = -1;\n\n            for (var cidx = 0, len = str.length; cidx < len; cidx++) {\n              var firstChar = cidx === str.length - 1;\n              var leadingSpace = /\\s/.test(reversedStr[cidx + 1]);\n              var match = _char === reversedStr[cidx];\n\n              if (match && (firstChar || leadingSpace)) {\n                index = str.length - 1 - cidx;\n                break;\n              }\n            }\n\n            return index;\n          }\n        }, {\n          key: \"isContentEditable\",\n          value: function isContentEditable(element) {\n            return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n          }\n        }, {\n          key: \"isMenuOffScreen\",\n          value: function isMenuOffScreen(coordinates, menuDimensions) {\n            var windowWidth = window.innerWidth;\n            var windowHeight = window.innerHeight;\n            var doc = document.documentElement;\n            var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n            var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n            var menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height;\n            var menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width;\n            var menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height;\n            var menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width;\n            return {\n              top: menuTop < Math.floor(windowTop),\n              right: menuRight > Math.ceil(windowLeft + windowWidth),\n              bottom: menuBottom > Math.ceil(windowTop + windowHeight),\n              left: menuLeft < Math.floor(windowLeft)\n            };\n          }\n        }, {\n          key: \"getMenuDimensions\",\n          value: function getMenuDimensions() {\n            // Width of the menu depends of its contents and position\n            // We must check what its width would be without any obstruction\n            // This way, we can achieve good positioning for flipping the menu\n            var dimensions = {\n              width: null,\n              height: null\n            };\n            this.tribute.menu.style.cssText = \"top: 0px;\\n                                 left: 0px;\\n                                 position: fixed;\\n                                 display: block;\\n                                 visibility; hidden;\";\n            dimensions.width = this.tribute.menu.offsetWidth;\n            dimensions.height = this.tribute.menu.offsetHeight;\n            this.tribute.menu.style.cssText = \"display: none;\";\n            return dimensions;\n          }\n        }, {\n          key: \"getTextAreaOrInputUnderlinePosition\",\n          value: function getTextAreaOrInputUnderlinePosition(element, position, flipped) {\n            var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n            var isFirefox = window.mozInnerScreenX !== null;\n            var div = this.getDocument().createElement('div');\n            div.id = 'input-textarea-caret-position-mirror-div';\n            this.getDocument().body.appendChild(div);\n            var style = div.style;\n            var computed = window.getComputedStyle ? getComputedStyle(element) : element.currentStyle;\n            style.whiteSpace = 'pre-wrap';\n\n            if (element.nodeName !== 'INPUT') {\n              style.wordWrap = 'break-word';\n            } // position off-screen\n\n\n            style.position = 'absolute';\n            style.visibility = 'hidden'; // transfer the element's properties to the div\n\n            properties.forEach(function (prop) {\n              style[prop] = computed[prop];\n            });\n\n            if (isFirefox) {\n              style.width = \"\".concat(parseInt(computed.width) - 2, \"px\");\n              if (element.scrollHeight > parseInt(computed.height)) style.overflowY = 'scroll';\n            } else {\n              style.overflow = 'hidden';\n            }\n\n            div.textContent = element.value.substring(0, position);\n\n            if (element.nodeName === 'INPUT') {\n              div.textContent = div.textContent.replace(/\\s/g, ' ');\n            }\n\n            var span = this.getDocument().createElement('span');\n            span.textContent = element.value.substring(position) || '.';\n            div.appendChild(span);\n            var rect = element.getBoundingClientRect();\n            var doc = document.documentElement;\n            var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n            var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n            var top = 0;\n            var left = 0;\n\n            if (this.menuContainerIsBody) {\n              top = rect.top;\n              left = rect.left;\n            }\n\n            var coordinates = {\n              top: top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\n              left: left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\n            };\n            var windowWidth = window.innerWidth;\n            var windowHeight = window.innerHeight;\n            var menuDimensions = this.getMenuDimensions();\n            var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n            if (menuIsOffScreen.right) {\n              coordinates.right = windowWidth - coordinates.left;\n              coordinates.left = 'auto';\n            }\n\n            var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n            if (menuIsOffScreen.bottom) {\n              var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n              var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n              coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop);\n              coordinates.top = 'auto';\n            }\n\n            menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n            if (menuIsOffScreen.left) {\n              coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n              delete coordinates.right;\n            }\n\n            if (menuIsOffScreen.top) {\n              coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n              delete coordinates.bottom;\n            }\n\n            this.getDocument().body.removeChild(div);\n            return coordinates;\n          }\n        }, {\n          key: \"getContentEditableCaretPosition\",\n          value: function getContentEditableCaretPosition(selectedNodePosition) {\n            var markerTextChar = '';\n            var markerEl,\n                markerId = \"sel_\".concat(new Date().getTime(), \"_\").concat(Math.random().toString().substr(2));\n            var range;\n            var sel = this.getWindowSelection();\n            var prevRange = sel.getRangeAt(0);\n            range = this.getDocument().createRange();\n            range.setStart(sel.anchorNode, selectedNodePosition);\n            range.setEnd(sel.anchorNode, selectedNodePosition);\n            range.collapse(false); // Create the marker element containing a single invisible character using DOM methods and insert it\n\n            markerEl = this.getDocument().createElement('span');\n            markerEl.id = markerId;\n            markerEl.appendChild(this.getDocument().createTextNode(markerTextChar));\n            range.insertNode(markerEl);\n            sel.removeAllRanges();\n            sel.addRange(prevRange);\n            var rect = markerEl.getBoundingClientRect();\n            var doc = document.documentElement;\n            var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n            var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n            var left = 0;\n            var top = 0;\n\n            if (this.menuContainerIsBody) {\n              left = rect.left;\n              top = rect.top;\n            } else {\n              left = markerEl.offsetLeft;\n              top = markerEl.offsetTop;\n            }\n\n            var coordinates = {\n              left: left + windowLeft,\n              top: top + markerEl.offsetHeight + windowTop\n            };\n            var windowWidth = window.innerWidth;\n            var windowHeight = window.innerHeight;\n            var menuDimensions = this.getMenuDimensions();\n            var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n            if (menuIsOffScreen.right) {\n              coordinates.left = 'auto';\n              coordinates.right = windowWidth - rect.left - windowLeft;\n            }\n\n            var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n            if (menuIsOffScreen.bottom) {\n              var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n              var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n              coordinates.top = 'auto';\n              coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top);\n            }\n\n            menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n            if (menuIsOffScreen.left) {\n              coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n              delete coordinates.right;\n            }\n\n            if (menuIsOffScreen.top) {\n              coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n              delete coordinates.bottom;\n            }\n\n            markerEl.parentNode.removeChild(markerEl);\n            return coordinates;\n          }\n        }, {\n          key: \"scrollIntoView\",\n          value: function scrollIntoView(elem) {\n            var reasonableBuffer = 20,\n                clientRect;\n            var maxScrollDisplacement = 100;\n            var e = this.menu;\n            if (typeof e === 'undefined') return;\n\n            while (clientRect === undefined || clientRect.height === 0) {\n              clientRect = e.getBoundingClientRect();\n\n              if (clientRect.height === 0) {\n                e = e.childNodes[0];\n\n                if (e === undefined || !e.getBoundingClientRect) {\n                  return;\n                }\n              }\n            }\n\n            var elemTop = clientRect.top;\n            var elemBottom = elemTop + clientRect.height;\n\n            if (elemTop < 0) {\n              window.scrollTo(0, window.pageYOffset + clientRect.top - reasonableBuffer);\n            } else if (elemBottom > window.innerHeight) {\n              var maxY = window.pageYOffset + clientRect.top - reasonableBuffer;\n\n              if (maxY - window.pageYOffset > maxScrollDisplacement) {\n                maxY = window.pageYOffset + maxScrollDisplacement;\n              }\n\n              var targetY = window.pageYOffset - (window.innerHeight - elemBottom);\n\n              if (targetY > maxY) {\n                targetY = maxY;\n              }\n\n              window.scrollTo(0, targetY);\n            }\n          }\n        }, {\n          key: \"menuContainerIsBody\",\n          get: function get() {\n            return this.tribute.menuContainer === document.body || !this.tribute.menuContainer;\n          }\n        }]);\n\n        return TributeRange;\n      }();\n\n      var _default = TributeRange;\n      exports[\"default\"] = _default;\n      module.exports = exports[\"default\"];\n    }, {}],\n    5: [function (require, module, exports) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports[\"default\"] = void 0;\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n\n      function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n      } // Thanks to https://github.com/mattyork/fuzzy\n\n\n      var TributeSearch = /*#__PURE__*/function () {\n        function TributeSearch(tribute) {\n          _classCallCheck(this, TributeSearch);\n\n          this.tribute = tribute;\n          this.tribute.search = this;\n        }\n\n        _createClass(TributeSearch, [{\n          key: \"simpleFilter\",\n          value: function simpleFilter(pattern, array) {\n            var _this = this;\n\n            return array.filter(function (string) {\n              return _this.test(pattern, string);\n            });\n          }\n        }, {\n          key: \"test\",\n          value: function test(pattern, string) {\n            return this.match(pattern, string) !== null;\n          }\n        }, {\n          key: \"match\",\n          value: function match(pattern, string, opts) {\n            opts = opts || {};\n            var patternIdx = 0,\n                result = [],\n                len = string.length,\n                totalScore = 0,\n                currScore = 0,\n                pre = opts.pre || '',\n                post = opts.post || '',\n                compareString = opts.caseSensitive && string || string.toLowerCase(),\n                ch,\n                compareChar;\n\n            if (opts.skip) {\n              return {\n                rendered: string,\n                score: 0\n              };\n            }\n\n            pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n            var patternCache = this.traverse(compareString, pattern, 0, 0, []);\n\n            if (!patternCache) {\n              return null;\n            }\n\n            return {\n              rendered: this.render(string, patternCache.cache, pre, post),\n              score: patternCache.score\n            };\n          }\n        }, {\n          key: \"traverse\",\n          value: function traverse(string, pattern, stringIndex, patternIndex, patternCache) {\n            // if the pattern search at end\n            if (pattern.length === patternIndex) {\n              // calculate score and copy the cache containing the indices where it's found\n              return {\n                score: this.calculateScore(patternCache),\n                cache: patternCache.slice()\n              };\n            } // if string at end or remaining pattern > remaining string\n\n\n            if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\n              return undefined;\n            }\n\n            var c = pattern[patternIndex];\n            var index = string.indexOf(c, stringIndex);\n            var best, temp;\n\n            while (index > -1) {\n              patternCache.push(index);\n              temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache);\n              patternCache.pop(); // if downstream traversal failed, return best answer so far\n\n              if (!temp) {\n                return best;\n              }\n\n              if (!best || best.score < temp.score) {\n                best = temp;\n              }\n\n              index = string.indexOf(c, index + 1);\n            }\n\n            return best;\n          }\n        }, {\n          key: \"calculateScore\",\n          value: function calculateScore(patternCache) {\n            var score = 0;\n            var temp = 1;\n            patternCache.forEach(function (index, i) {\n              if (i > 0) {\n                if (patternCache[i - 1] + 1 === index) {\n                  temp += temp + 1;\n                } else {\n                  temp = 1;\n                }\n              }\n\n              score += temp;\n            });\n            return score;\n          }\n        }, {\n          key: \"render\",\n          value: function render(string, indices, pre, post) {\n            var rendered = string.substring(0, indices[0]);\n            indices.forEach(function (index, i) {\n              rendered += pre + string[index] + post + string.substring(index + 1, indices[i + 1] ? indices[i + 1] : string.length);\n            });\n            return rendered;\n          }\n        }, {\n          key: \"filter\",\n          value: function filter(pattern, arr, opts) {\n            var _this2 = this;\n\n            opts = opts || {};\n            return arr.reduce(function (prev, element, idx, arr) {\n              var str = element;\n\n              if (opts.extract) {\n                str = opts.extract(element);\n\n                if (!str) {\n                  // take care of undefineds / nulls / etc.\n                  str = '';\n                }\n              }\n\n              var rendered = _this2.match(pattern, str, opts);\n\n              if (rendered != null) {\n                prev[prev.length] = {\n                  string: rendered.rendered,\n                  score: rendered.score,\n                  index: idx,\n                  original: element\n                };\n              }\n\n              return prev;\n            }, []).sort(function (a, b) {\n              var compare = b.score - a.score;\n              if (compare) return compare;\n              return a.index - b.index;\n            });\n          }\n        }]);\n\n        return TributeSearch;\n      }();\n\n      var _default = TributeSearch;\n      exports[\"default\"] = _default;\n      module.exports = exports[\"default\"];\n    }, {}],\n    6: [function (require, module, exports) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports[\"default\"] = void 0;\n\n      var _Tribute = _interopRequireDefault(require(\"./Tribute\"));\n\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n          \"default\": obj\n        };\n      }\n      /**\n      * Tribute.js\n      * Native ES6 JavaScript @mention Plugin\n      **/\n\n\n      var _default = _Tribute[\"default\"];\n      exports[\"default\"] = _default;\n      module.exports = exports[\"default\"];\n    }, {\n      \"./Tribute\": 1\n    }],\n    7: [function (require, module, exports) {\n      \"use strict\";\n\n      if (!Array.prototype.find) {\n        Array.prototype.find = function (predicate) {\n          if (this === null) {\n            throw new TypeError('Array.prototype.find called on null or undefined');\n          }\n\n          if (typeof predicate !== 'function') {\n            throw new TypeError('predicate must be a function');\n          }\n\n          var list = Object(this);\n          var length = list.length >>> 0;\n          var thisArg = arguments[1];\n          var value;\n\n          for (var i = 0; i < length; i++) {\n            value = list[i];\n\n            if (predicate.call(thisArg, value, i, list)) {\n              return value;\n            }\n          }\n\n          return undefined;\n        };\n      }\n\n      if (window && typeof window.CustomEvent !== \"function\") {\n        var CustomEvent = function CustomEvent(event, params) {\n          params = params || {\n            bubbles: false,\n            cancelable: false,\n            detail: undefined\n          };\n          var evt = document.createEvent('CustomEvent');\n          evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n          return evt;\n        };\n\n        if (typeof window.Event !== 'undefined') {\n          CustomEvent.prototype = window.Event.prototype;\n        }\n\n        window.CustomEvent = CustomEvent;\n      }\n    }, {}]\n  }, {}, [6])(6);\n});","map":{"version":3,"mappings":"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","names":["f","exports","module","define","amd","g","window","global","self","Tribute","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","Object","defineProperty","value","_TributeEvents","_interopRequireDefault","_TributeMenuEvents","_TributeRange","_TributeSearch","obj","__esModule","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","err","Array","isArray","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","_ref","_this","_ref$values","values","_ref$iframe","iframe","_ref$selectClass","selectClass","_ref$trigger","trigger","_ref$autocompleteMode","autocompleteMode","_ref$selectTemplate","selectTemplate","_ref$menuItemTemplate","menuItemTemplate","_ref$lookup","lookup","_ref$fillAttr","fillAttr","_ref$collection","collection","_ref$menuContainer","menuContainer","_ref$noMatchTemplate","noMatchTemplate","_ref$requireLeadingSp","requireLeadingSpace","_ref$allowSpaces","allowSpaces","_ref$replaceTextSuffi","replaceTextSuffix","_ref$positionMenu","positionMenu","_ref$spaceSelectsMatc","spaceSelectsMatch","_ref$searchOpts","searchOpts","_ref$menuItemLimit","menuItemLimit","menuSelected","current","inputEvent","isActive","hasTrailingSpace","defaultSelectTemplate","bind","defaultMenuItemTemplate","console","warn","map","item","triggers","config","attach","el","jQuery","get","constructor","NodeList","HTMLCollection","_attach","hasAttribute","nodeName","ensureEditable","events","setAttribute","element","inputTypes","indexOf","contentEditable","createMenu","wrapper","range","getDocument","createElement","ul","className","appendChild","body","showMenuFor","scrollTo","_this2","mentionText","currentMentionTextSnapshot","menu","tributeMenu","menuEvents","processValues","items","search","filter","pre","post","skip","extract","slice","filteredItems","querySelector","positionMenuAtCaret","noMatchEvent","CustomEvent","detail","dispatchEvent","hideMenu","innerHTML","fragment","createDocumentFragment","forEach","index","li","addEventListener","_this2$_findLiTarget","_findLiTarget","_this2$_findLiTarget2","movementY","setActiveLi","getAttribute","parentNode","showMenuForCollection","collectionIndex","document","activeElement","placeCaretAtEnd","externalTrigger","isContentEditable","insertTextAtCursor","insertAtCaret","focus","getSelection","createRange","selectNodeContents","collapse","sel","removeAllRanges","addRange","createTextRange","textRange","moveToElementText","select","text","html","getRangeAt","deleteContents","textNode","createTextNode","insertNode","textarea","scrollPos","scrollTop","caretPos","selectionStart","front","substring","back","selectionEnd","style","cssText","selectItemAtIndex","originalEvent","parseInt","isNaN","content","replaceText","replaceTriggerText","_append","newValues","replace","concat","append","appendCurrent","detach","_detach","_this3","unbind","setTimeout","removeAttribute","remove","original","matchItem","string","_default","TributeEvents","tribute","boundKeydown","keydown","boundKeyup","keyup","boundInput","input","removeEventListener","event","shouldDeactivate","commandEvent","keys","keyCode","callbacks","toLowerCase","click","contains","preventDefault","stopPropagation","getElementsByClassName","updateSelection","triggerChar","getKeyCode","find","charCodeAt","eventKeyPressed","_char","info","getTriggerInfo","mentionTriggerChar","selectedPath","mentionSelectedPath","selectedOffset","mentionSelectedOffset","collectionItem","enter","escape","tab","space","up","count","selected","scrollHeight","down","_delete","lis","querySelectorAll","classList","add","liClientRect","getBoundingClientRect","menuClientRect","bottom","scrollDistance","top","_scrollDistance","getFullHeight","elem","includeMargin","height","currentStyle","getComputedStyle","parseFloat","marginTop","marginBottom","TributeMenuEvents","menuClickEvent","menuContainerScrollEvent","debounce","windowResizeEvent","func","wait","immediate","_arguments","arguments","timeout","context","args","later","apply","callNow","clearTimeout","TributeRange","contentWindow","coordinates","getTextAreaOrInputUnderlinePosition","mentionPosition","getContentEditableCaretPosition","left","right","scrollIntoView","menuDimensions","width","offsetWidth","offsetHeight","menuIsOffScreen","isMenuOffScreen","menuIsOffScreenHorizontally","innerWidth","menuIsOffScreenVertically","innerHeight","selectElement","targetElement","path","offset","childNodes","nextSibling","previousSibling","getWindowSelection","setStart","setEnd","error","replaceEvent","myField","textSuffix","startPos","endPos","_textSuffix","pasteHtml","anchorNode","frag","node","lastNode","firstChild","cloneRange","setStartAfter","getNodePositionInParent","getContentEditableSelectedPath","ctx","ce","reverse","startOffset","getTextPrecedingCurrentSelection","textComponent","selectedElem","workingNodeContent","textContent","selectStartOffset","getLastWordInText","wordsArray","split","worldsCount","trim","menuAlreadyActive","isAutocomplete","selectionInfo","effectiveRange","lastWordOfEffectiveRange","mentionSelectedElement","mostRecentTriggerCharPos","idx","lastIndexWithLeadingSpace","lastIndexOf","test","currentTriggerSnippet","firstSnippetChar","leadingSpace","regex","str","reversedStr","join","cidx","len","firstChar","match","windowWidth","windowHeight","doc","documentElement","windowLeft","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","clientTop","menuTop","menuRight","menuBottom","menuLeft","Math","floor","ceil","getMenuDimensions","dimensions","position","flipped","properties","isFirefox","mozInnerScreenX","div","id","computed","whiteSpace","wordWrap","visibility","prop","overflowY","overflow","span","rect","menuContainerIsBody","offsetTop","borderTopWidth","fontSize","offsetLeft","borderLeftWidth","parentHeight","parentRect","scrollStillAvailable","removeChild","selectedNodePosition","markerTextChar","markerEl","markerId","Date","getTime","random","toString","substr","prevRange","reasonableBuffer","clientRect","maxScrollDisplacement","elemTop","elemBottom","maxY","targetY","TributeSearch","simpleFilter","pattern","array","opts","patternIdx","result","totalScore","currScore","compareString","caseSensitive","ch","compareChar","rendered","score","patternCache","traverse","render","cache","stringIndex","patternIndex","calculateScore","best","temp","pop","indices","reduce","prev","sort","b","compare","_Tribute","predicate","list","thisArg","params","bubbles","cancelable","evt","createEvent","initCustomEvent","Event"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-core/app/packs/src/decidim/vendor/tribute.js"],"sourcesContent":["/* eslint-disable */\n\n/*\n  Modified file from the original tribute.js\n  Adding inside click event the conditional if the li element has no disabled-tribute-element class name. if true, then it must continue with normal behaviour.\n*/\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Tribute = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nrequire(\"./utils\");\n\nvar _TributeEvents = _interopRequireDefault(require(\"./TributeEvents\"));\n\nvar _TributeMenuEvents = _interopRequireDefault(require(\"./TributeMenuEvents\"));\n\nvar _TributeRange = _interopRequireDefault(require(\"./TributeRange\"));\n\nvar _TributeSearch = _interopRequireDefault(require(\"./TributeSearch\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Tribute =\n/*#__PURE__*/\nfunction () {\n  function Tribute(_ref) {\n    var _this = this;\n\n    var _ref$values = _ref.values,\n        values = _ref$values === void 0 ? null : _ref$values,\n        _ref$iframe = _ref.iframe,\n        iframe = _ref$iframe === void 0 ? null : _ref$iframe,\n        _ref$selectClass = _ref.selectClass,\n        selectClass = _ref$selectClass === void 0 ? 'highlight' : _ref$selectClass,\n        _ref$trigger = _ref.trigger,\n        trigger = _ref$trigger === void 0 ? '@' : _ref$trigger,\n        _ref$autocompleteMode = _ref.autocompleteMode,\n        autocompleteMode = _ref$autocompleteMode === void 0 ? false : _ref$autocompleteMode,\n        _ref$selectTemplate = _ref.selectTemplate,\n        selectTemplate = _ref$selectTemplate === void 0 ? null : _ref$selectTemplate,\n        _ref$menuItemTemplate = _ref.menuItemTemplate,\n        menuItemTemplate = _ref$menuItemTemplate === void 0 ? null : _ref$menuItemTemplate,\n        _ref$lookup = _ref.lookup,\n        lookup = _ref$lookup === void 0 ? 'key' : _ref$lookup,\n        _ref$fillAttr = _ref.fillAttr,\n        fillAttr = _ref$fillAttr === void 0 ? 'value' : _ref$fillAttr,\n        _ref$collection = _ref.collection,\n        collection = _ref$collection === void 0 ? null : _ref$collection,\n        _ref$menuContainer = _ref.menuContainer,\n        menuContainer = _ref$menuContainer === void 0 ? null : _ref$menuContainer,\n        _ref$noMatchTemplate = _ref.noMatchTemplate,\n        noMatchTemplate = _ref$noMatchTemplate === void 0 ? null : _ref$noMatchTemplate,\n        _ref$requireLeadingSp = _ref.requireLeadingSpace,\n        requireLeadingSpace = _ref$requireLeadingSp === void 0 ? true : _ref$requireLeadingSp,\n        _ref$allowSpaces = _ref.allowSpaces,\n        allowSpaces = _ref$allowSpaces === void 0 ? false : _ref$allowSpaces,\n        _ref$replaceTextSuffi = _ref.replaceTextSuffix,\n        replaceTextSuffix = _ref$replaceTextSuffi === void 0 ? null : _ref$replaceTextSuffi,\n        _ref$positionMenu = _ref.positionMenu,\n        positionMenu = _ref$positionMenu === void 0 ? true : _ref$positionMenu,\n        _ref$spaceSelectsMatc = _ref.spaceSelectsMatch,\n        spaceSelectsMatch = _ref$spaceSelectsMatc === void 0 ? false : _ref$spaceSelectsMatc,\n        _ref$searchOpts = _ref.searchOpts,\n        searchOpts = _ref$searchOpts === void 0 ? {} : _ref$searchOpts,\n        _ref$menuItemLimit = _ref.menuItemLimit,\n        menuItemLimit = _ref$menuItemLimit === void 0 ? null : _ref$menuItemLimit;\n\n    _classCallCheck(this, Tribute);\n\n    this.autocompleteMode = autocompleteMode;\n    this.menuSelected = 0;\n    this.current = {};\n    this.inputEvent = false;\n    this.isActive = false;\n    this.menuContainer = menuContainer;\n    this.allowSpaces = allowSpaces;\n    this.replaceTextSuffix = replaceTextSuffix;\n    this.positionMenu = positionMenu;\n    this.hasTrailingSpace = false;\n    this.spaceSelectsMatch = spaceSelectsMatch;\n\n    if (this.autocompleteMode) {\n      trigger = '';\n      allowSpaces = false;\n    }\n\n    if (values) {\n      this.collection = [{\n        // symbol that starts the lookup\n        trigger: trigger,\n        // is it wrapped in an iframe\n        iframe: iframe,\n        // class applied to selected item\n        selectClass: selectClass,\n        // function called on select that retuns the content to insert\n        selectTemplate: (selectTemplate || Tribute.defaultSelectTemplate).bind(this),\n        // function called that returns content for an item\n        menuItemTemplate: (menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\n        // function called when menu is empty, disables hiding of menu.\n        noMatchTemplate: function (t) {\n          if (typeof t === 'function') {\n            return t.bind(_this);\n          }\n\n          return noMatchTemplate || function () {\n            return '';\n          }.bind(_this);\n        }(noMatchTemplate),\n        // column to search against in the object\n        lookup: lookup,\n        // column that contains the content to insert by default\n        fillAttr: fillAttr,\n        // array of objects or a function returning an array of objects\n        values: values,\n        requireLeadingSpace: requireLeadingSpace,\n        searchOpts: searchOpts,\n        menuItemLimit: menuItemLimit\n      }];\n    } else if (collection) {\n      if (this.autocompleteMode) console.warn('Tribute in autocomplete mode does not work for collections');\n      this.collection = collection.map(function (item) {\n        return {\n          trigger: item.trigger || trigger,\n          iframe: item.iframe || iframe,\n          selectClass: item.selectClass || selectClass,\n          selectTemplate: (item.selectTemplate || Tribute.defaultSelectTemplate).bind(_this),\n          menuItemTemplate: (item.menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(_this),\n          // function called when menu is empty, disables hiding of menu.\n          noMatchTemplate: function (t) {\n            if (typeof t === 'function') {\n              return t.bind(_this);\n            }\n\n            return null;\n          }(noMatchTemplate),\n          lookup: item.lookup || lookup,\n          fillAttr: item.fillAttr || fillAttr,\n          values: item.values,\n          requireLeadingSpace: item.requireLeadingSpace,\n          searchOpts: item.searchOpts || searchOpts,\n          menuItemLimit: item.menuItemLimit || menuItemLimit\n        };\n      });\n    } else {\n      throw new Error('[Tribute] No collection specified.');\n    }\n\n    new _TributeRange[\"default\"](this);\n    new _TributeEvents[\"default\"](this);\n    new _TributeMenuEvents[\"default\"](this);\n    new _TributeSearch[\"default\"](this);\n  }\n\n  _createClass(Tribute, [{\n    key: \"triggers\",\n    value: function triggers() {\n      return this.collection.map(function (config) {\n        return config.trigger;\n      });\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(el) {\n      if (!el) {\n        throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n      } // Check if it is a jQuery collection\n\n\n      if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n        el = el.get();\n      } // Is el an Array/Array-like object?\n\n\n      if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n        var length = el.length;\n\n        for (var i = 0; i < length; ++i) {\n          this._attach(el[i]);\n        }\n      } else {\n        this._attach(el);\n      }\n    }\n  }, {\n    key: \"_attach\",\n    value: function _attach(el) {\n      if (el.hasAttribute('data-tribute')) {\n        console.warn('Tribute was already bound to ' + el.nodeName);\n      }\n\n      this.ensureEditable(el);\n      this.events.bind(el);\n      el.setAttribute('data-tribute', true);\n    }\n  }, {\n    key: \"ensureEditable\",\n    value: function ensureEditable(element) {\n      if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\n        if (element.contentEditable) {\n          element.contentEditable = true;\n        } else {\n          throw new Error('[Tribute] Cannot bind to ' + element.nodeName);\n        }\n      }\n    }\n  }, {\n    key: \"createMenu\",\n    value: function createMenu() {\n      var wrapper = this.range.getDocument().createElement('div'),\n          ul = this.range.getDocument().createElement('ul');\n      wrapper.className = 'tribute-container';\n      wrapper.setAttribute('aria-expanded','true');\n      ul.setAttribute('id','results');\n      wrapper.appendChild(ul);\n\n      if (this.menuContainer) {\n        return this.menuContainer.appendChild(wrapper);\n      }\n\n      return this.range.getDocument().body.appendChild(wrapper);\n    }\n  }, {\n    key: \"showMenuFor\",\n    value: function showMenuFor(element, scrollTo) {\n      var _this2 = this;\n\n      // Only proceed if menu isn't already shown for the current element & mentionText\n      if (this.isActive && this.current.element === element && this.current.mentionText === this.currentMentionTextSnapshot) {\n        return;\n      }\n\n      this.currentMentionTextSnapshot = this.current.mentionText; // create the menu if it doesn't exist.\n\n      if (!this.menu) {\n        this.menu = this.createMenu();\n        element.tributeMenu = this.menu;\n        this.menuEvents.bind(this.menu);\n      }\n\n      this.isActive = true;\n      this.menuSelected = 0;\n\n      if (!this.current.mentionText) {\n        this.current.mentionText = '';\n      }\n\n      var processValues = function processValues(values) {\n        // Tribute may not be active any more by the time the value callback returns\n        if (!_this2.isActive) {\n          return;\n        }\n\n        var items = _this2.search.filter(_this2.current.mentionText, values, {\n          pre: _this2.current.collection.searchOpts.pre || '<span>',\n          post: _this2.current.collection.searchOpts.post || '</span>',\n          skip: _this2.current.collection.searchOpts.skip,\n          extract: function extract(el) {\n            if (typeof _this2.current.collection.lookup === 'string') {\n              return el[_this2.current.collection.lookup];\n            } else if (typeof _this2.current.collection.lookup === 'function') {\n              return _this2.current.collection.lookup(el, _this2.current.mentionText);\n            } else {\n              throw new Error('Invalid lookup attribute, lookup must be string or function.');\n            }\n          }\n        });\n\n        if (_this2.current.collection.menuItemLimit) {\n          items = items.slice(0, _this2.current.collection.menuItemLimit);\n        }\n\n        _this2.current.filteredItems = items;\n\n        var ul = _this2.menu.querySelector('ul');\n\n        _this2.range.positionMenuAtCaret(scrollTo);\n\n        if (!items.length) {\n          var noMatchEvent = new CustomEvent('tribute-no-match', {\n            detail: _this2.menu\n          });\n\n          _this2.current.element.dispatchEvent(noMatchEvent);\n\n          if (typeof _this2.current.collection.noMatchTemplate === 'function' && !_this2.current.collection.noMatchTemplate() || !_this2.current.collection.noMatchTemplate) {\n            _this2.hideMenu();\n          } else {\n            typeof _this2.current.collection.noMatchTemplate === 'function' ? ul.innerHTML = _this2.current.collection.noMatchTemplate() : ul.innerHTML = _this2.current.collection.noMatchTemplate;\n          }\n\n          return;\n        }\n\n        ul.innerHTML = '';\n\n        var fragment = _this2.range.getDocument().createDocumentFragment();\n\n        items.forEach(function (item, index) {\n          var li = _this2.range.getDocument().createElement('li');\n          li.setAttribute('role', 'option');\n          li.setAttribute('data-index', index);\n          li.addEventListener('mousemove', function (e) {\n            var _this2$_findLiTarget = _this2._findLiTarget(e.target),\n                _this2$_findLiTarget2 = _slicedToArray(_this2$_findLiTarget, 2),\n                li = _this2$_findLiTarget2[0],\n                index = _this2$_findLiTarget2[1];\n\n            if (e.movementY !== 0) {\n              _this2.events.setActiveLi(index);\n            }\n          });\n\n          if (_this2.menuSelected === index) {\n            li.className = _this2.current.collection.selectClass;\n          }\n\n          li.innerHTML = _this2.current.collection.menuItemTemplate(item);\n          fragment.appendChild(li);\n        });\n        ul.appendChild(fragment);\n      };\n\n      if (typeof this.current.collection.values === 'function') {\n        this.current.collection.values(this.current.mentionText, processValues);\n      } else {\n        processValues(this.current.collection.values);\n      }\n    }\n  }, {\n    key: \"_findLiTarget\",\n    value: function _findLiTarget(el) {\n      if (!el) return [];\n      var index = el.getAttribute('data-index');\n      return !index ? this._findLiTarget(el.parentNode) : [el, index];\n    }\n  }, {\n    key: \"showMenuForCollection\",\n    value: function showMenuForCollection(element, collectionIndex) {\n      if (element !== document.activeElement) {\n        this.placeCaretAtEnd(element);\n      }\n\n      this.current.collection = this.collection[collectionIndex || 0];\n      this.current.externalTrigger = true;\n      this.current.element = element;\n      if (element.isContentEditable) this.insertTextAtCursor(this.current.collection.trigger);else this.insertAtCaret(element, this.current.collection.trigger);\n      this.showMenuFor(element);\n    } // TODO: make sure this works for inputs/textareas\n\n  }, {\n    key: \"placeCaretAtEnd\",\n    value: function placeCaretAtEnd(el) {\n      el.focus();\n\n      if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n        var range = document.createRange();\n        range.selectNodeContents(el);\n        range.collapse(false);\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (typeof document.body.createTextRange != \"undefined\") {\n        var textRange = document.body.createTextRange();\n        textRange.moveToElementText(el);\n        textRange.collapse(false);\n        textRange.select();\n      }\n    } // for contenteditable\n\n  }, {\n    key: \"insertTextAtCursor\",\n    value: function insertTextAtCursor(text) {\n      var sel, range, html;\n      sel = window.getSelection();\n      range = sel.getRangeAt(0);\n      range.deleteContents();\n      var textNode = document.createTextNode(text);\n      range.insertNode(textNode);\n      range.selectNodeContents(textNode);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } // for regular inputs\n\n  }, {\n    key: \"insertAtCaret\",\n    value: function insertAtCaret(textarea, text) {\n      var scrollPos = textarea.scrollTop;\n      var caretPos = textarea.selectionStart;\n      var front = textarea.value.substring(0, caretPos);\n      var back = textarea.value.substring(textarea.selectionEnd, textarea.value.length);\n      textarea.value = front + text + back;\n      caretPos = caretPos + text.length;\n      textarea.selectionStart = caretPos;\n      textarea.selectionEnd = caretPos;\n      textarea.focus();\n      textarea.scrollTop = scrollPos;\n    }\n  }, {\n    key: \"hideMenu\",\n    value: function hideMenu() {\n      if (this.menu) {\n        this.menu.style.cssText = 'display: none;';\n        this.isActive = false;\n        this.menuSelected = 0;\n        this.current = {};\n      }\n    }\n  }, {\n    key: \"selectItemAtIndex\",\n    value: function selectItemAtIndex(index, originalEvent) {\n      index = parseInt(index);\n      if (typeof index !== 'number' || isNaN(index)) return;\n      var item = this.current.filteredItems[index];\n      var content = this.current.collection.selectTemplate(item);\n      if (content !== null) this.replaceText(content, originalEvent, item);\n    }\n  }, {\n    key: \"replaceText\",\n    value: function replaceText(content, originalEvent, item) {\n      this.range.replaceTriggerText(content, true, true, originalEvent, item);\n    }\n  }, {\n    key: \"_append\",\n    value: function _append(collection, newValues, replace) {\n      if (typeof collection.values === 'function') {\n        throw new Error('Unable to append to values, as it is a function.');\n      } else if (!replace) {\n        collection.values = collection.values.concat(newValues);\n      } else {\n        collection.values = newValues;\n      }\n    }\n  }, {\n    key: \"append\",\n    value: function append(collectionIndex, newValues, replace) {\n      var index = parseInt(collectionIndex);\n      if (typeof index !== 'number') throw new Error('please provide an index for the collection to update.');\n      var collection = this.collection[index];\n\n      this._append(collection, newValues, replace);\n    }\n  }, {\n    key: \"appendCurrent\",\n    value: function appendCurrent(newValues, replace) {\n      if (this.isActive) {\n        this._append(this.current.collection, newValues, replace);\n      } else {\n        throw new Error('No active state. Please use append instead and pass an index.');\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach(el) {\n      if (!el) {\n        throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n      } // Check if it is a jQuery collection\n\n\n      if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n        el = el.get();\n      } // Is el an Array/Array-like object?\n\n\n      if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n        var length = el.length;\n\n        for (var i = 0; i < length; ++i) {\n          this._detach(el[i]);\n        }\n      } else {\n        this._detach(el);\n      }\n    }\n  }, {\n    key: \"_detach\",\n    value: function _detach(el) {\n      var _this3 = this;\n\n      this.events.unbind(el);\n\n      if (el.tributeMenu) {\n        this.menuEvents.unbind(el.tributeMenu);\n      }\n\n      setTimeout(function () {\n        el.removeAttribute('data-tribute');\n        _this3.isActive = false;\n\n        if (el.tributeMenu) {\n          el.tributeMenu.remove();\n        }\n      });\n    }\n  }], [{\n    key: \"defaultSelectTemplate\",\n    value: function defaultSelectTemplate(item) {\n      if (typeof item === 'undefined') return null;\n\n      if (this.range.isContentEditable(this.current.element)) {\n        return '<span class=\"tribute-mention\">' + (this.current.collection.trigger + item.original[this.current.collection.fillAttr]) + '</span>';\n      }\n\n      return this.current.collection.trigger + item.original[this.current.collection.fillAttr];\n    }\n  }, {\n    key: \"defaultMenuItemTemplate\",\n    value: function defaultMenuItemTemplate(matchItem) {\n      return matchItem.string;\n    }\n  }, {\n    key: \"inputTypes\",\n    value: function inputTypes() {\n      return ['TEXTAREA', 'INPUT'];\n    }\n  }]);\n\n  return Tribute;\n}();\n\nvar _default = Tribute;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{\"./TributeEvents\":2,\"./TributeMenuEvents\":3,\"./TributeRange\":4,\"./TributeSearch\":5,\"./utils\":7}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar TributeEvents =\n/*#__PURE__*/\nfunction () {\n  function TributeEvents(tribute) {\n    _classCallCheck(this, TributeEvents);\n\n    this.tribute = tribute;\n    this.tribute.events = this;\n  }\n\n  _createClass(TributeEvents, [{\n    key: \"bind\",\n    value: function bind(element) {\n      element.boundKeydown = this.keydown.bind(element, this);\n      element.boundKeyup = this.keyup.bind(element, this);\n      element.boundInput = this.input.bind(element, this);\n      element.addEventListener('keydown', element.boundKeydown, false);\n      element.addEventListener('keyup', element.boundKeyup, false);\n      element.addEventListener('input', element.boundInput, false);\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(element) {\n      element.removeEventListener('keydown', element.boundKeydown, false);\n      element.removeEventListener('keyup', element.boundKeyup, false);\n      element.removeEventListener('input', element.boundInput, false);\n      delete element.boundKeydown;\n      delete element.boundKeyup;\n      delete element.boundInput;\n    }\n  }, {\n    key: \"keydown\",\n    value: function keydown(instance, event) {\n      if (instance.shouldDeactivate(event)) {\n        instance.tribute.isActive = false;\n        instance.tribute.hideMenu();\n      }\n\n      var element = this;\n      instance.commandEvent = false;\n      TributeEvents.keys().forEach(function (o) {\n        if (o.key === event.keyCode) {\n          instance.commandEvent = true;\n          instance.callbacks()[o.value.toLowerCase()](event, element);\n        }\n      });\n    }\n  }, {\n    key: \"input\",\n    value: function input(instance, event) {\n      instance.inputEvent = true;\n      instance.keyup.call(this, instance, event);\n    }\n  }, {\n    key: \"click\",\n    value: function click(instance, event) {\n      var tribute = instance.tribute;\n\n      if (tribute.menu && tribute.menu.contains(event.target)) {\n        var li = event.target;\n        event.preventDefault();\n        event.stopPropagation();\n\n        while (li.nodeName.toLowerCase() !== 'li') {\n          li = li.parentNode;\n\n          if (!li || li === tribute.menu) {\n            throw new Error('cannot find the <li> container for the click');\n          }\n        }\n\n        if (li.getElementsByClassName(\"disabled-tribute-element\")[0]==undefined){\n          tribute.selectItemAtIndex(li.getAttribute('data-index'), event);\n          tribute.hideMenu(); // TODO: should fire with externalTrigger and target is outside of menu\n        }\n      } else if (tribute.current.element && !tribute.current.externalTrigger) {\n        tribute.current.externalTrigger = false;\n        setTimeout(function () {\n          return tribute.hideMenu();\n        });\n      }\n    }\n  }, {\n    key: \"keyup\",\n    value: function keyup(instance, event) {\n      if (instance.inputEvent) {\n        instance.inputEvent = false;\n      }\n\n      instance.updateSelection(this);\n      if (event.keyCode === 27) return;\n\n      if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\n        instance.tribute.hasTrailingSpace = false;\n        instance.commandEvent = true;\n        instance.callbacks()[\"space\"](event, this);\n        return;\n      }\n\n      if (!instance.tribute.isActive) {\n        if (instance.tribute.autocompleteMode) {\n          instance.callbacks().triggerChar(event, this, '');\n        } else {\n          var keyCode = instance.getKeyCode(instance, this, event);\n          if (isNaN(keyCode) || !keyCode) return;\n          var trigger = instance.tribute.triggers().find(function (trigger) {\n            return trigger.charCodeAt(0) === keyCode;\n          });\n\n          if (typeof trigger !== 'undefined') {\n            instance.callbacks().triggerChar(event, this, trigger);\n          }\n        }\n      }\n\n      if ((instance.tribute.current.trigger || instance.tribute.autocompleteMode) && instance.commandEvent === false || instance.tribute.isActive && event.keyCode === 8) {\n        instance.tribute.showMenuFor(this, true);\n      }\n    }\n  }, {\n    key: \"shouldDeactivate\",\n    value: function shouldDeactivate(event) {\n      if (!this.tribute.isActive) return false;\n\n      if (this.tribute.current.mentionText.length === 0) {\n        var eventKeyPressed = false;\n        TributeEvents.keys().forEach(function (o) {\n          if (event.keyCode === o.key) eventKeyPressed = true;\n        });\n        return !eventKeyPressed;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getKeyCode\",\n    value: function getKeyCode(instance, el, event) {\n      var _char;\n\n      var tribute = instance.tribute;\n      var info = tribute.range.getTriggerInfo(false, tribute.hasTrailingSpace, true, tribute.allowSpaces, tribute.autocompleteMode);\n\n      if (info) {\n        return info.mentionTriggerChar.charCodeAt(0);\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"updateSelection\",\n    value: function updateSelection(el) {\n      this.tribute.current.element = el;\n      var info = this.tribute.range.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (info) {\n        this.tribute.current.selectedPath = info.mentionSelectedPath;\n        this.tribute.current.mentionText = info.mentionText;\n        this.tribute.current.selectedOffset = info.mentionSelectedOffset;\n      }\n    }\n  }, {\n    key: \"callbacks\",\n    value: function callbacks() {\n      var _this = this;\n\n      return {\n        triggerChar: function triggerChar(e, el, trigger) {\n          var tribute = _this.tribute;\n          tribute.current.trigger = trigger;\n          var collectionItem = tribute.collection.find(function (item) {\n            return item.trigger === trigger;\n          });\n          tribute.current.collection = collectionItem;\n          if (tribute.inputEvent) tribute.showMenuFor(el, true);\n        },\n        enter: function enter(e, el) {\n          // choose selection\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            setTimeout(function () {\n              _this.tribute.selectItemAtIndex(_this.tribute.menuSelected, e);\n\n              _this.tribute.hideMenu();\n            }, 0);\n          }\n        },\n        escape: function escape(e, el) {\n          if (_this.tribute.isActive) {\n            e.preventDefault();\n            e.stopPropagation();\n            _this.tribute.isActive = false;\n\n            _this.tribute.hideMenu();\n          }\n        },\n        tab: function tab(e, el) {\n          // choose first match\n          _this.callbacks().enter(e, el);\n        },\n        space: function space(e, el) {\n          if (_this.tribute.isActive) {\n            if (_this.tribute.spaceSelectsMatch) {\n              _this.callbacks().enter(e, el);\n            } else if (!_this.tribute.allowSpaces) {\n              e.stopPropagation();\n              setTimeout(function () {\n                _this.tribute.hideMenu();\n\n                _this.tribute.isActive = false;\n              }, 0);\n            }\n          }\n        },\n        up: function up(e, el) {\n          // navigate up ul\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            var count = _this.tribute.current.filteredItems.length,\n                selected = _this.tribute.menuSelected;\n\n            if (count > selected && selected > 0) {\n              _this.tribute.menuSelected--;\n\n              _this.setActiveLi();\n            } else if (selected === 0) {\n              _this.tribute.menuSelected = count - 1;\n\n              _this.setActiveLi();\n\n              _this.tribute.menu.scrollTop = _this.tribute.menu.scrollHeight;\n            }\n          }\n        },\n        down: function down(e, el) {\n          // navigate down ul\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            var count = _this.tribute.current.filteredItems.length - 1,\n                selected = _this.tribute.menuSelected;\n\n            if (count > selected) {\n              _this.tribute.menuSelected++;\n\n              _this.setActiveLi();\n            } else if (count === selected) {\n              _this.tribute.menuSelected = 0;\n\n              _this.setActiveLi();\n\n              _this.tribute.menu.scrollTop = 0;\n            }\n          }\n        },\n        \"delete\": function _delete(e, el) {\n          if (_this.tribute.isActive && _this.tribute.current.mentionText.length < 1) {\n            _this.tribute.hideMenu();\n          } else if (_this.tribute.isActive) {\n            _this.tribute.showMenuFor(el);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"setActiveLi\",\n    value: function setActiveLi(index) {\n      var lis = this.tribute.menu.querySelectorAll('li'),\n          length = lis.length >>> 0;\n      if (index) this.tribute.menuSelected = parseInt(index);\n\n      for (var i = 0; i < length; i++) {\n        var li = lis[i];\n\n        if (i === this.tribute.menuSelected) {\n          li.classList.add(this.tribute.current.collection.selectClass);\n          var liClientRect = li.getBoundingClientRect();\n          var menuClientRect = this.tribute.menu.getBoundingClientRect();\n\n          if (liClientRect.bottom > menuClientRect.bottom) {\n            var scrollDistance = liClientRect.bottom - menuClientRect.bottom;\n            this.tribute.menu.scrollTop += scrollDistance;\n          } else if (liClientRect.top < menuClientRect.top) {\n            var _scrollDistance = menuClientRect.top - liClientRect.top;\n\n            this.tribute.menu.scrollTop -= _scrollDistance;\n          }\n        } else {\n          li.classList.remove(this.tribute.current.collection.selectClass);\n        }\n      }\n    }\n  }, {\n    key: \"getFullHeight\",\n    value: function getFullHeight(elem, includeMargin) {\n      var height = elem.getBoundingClientRect().height;\n\n      if (includeMargin) {\n        var style = elem.currentStyle || window.getComputedStyle(elem);\n        return height + parseFloat(style.marginTop) + parseFloat(style.marginBottom);\n      }\n\n      return height;\n    }\n  }], [{\n    key: \"keys\",\n    value: function keys() {\n      return [{\n        key: 9,\n        value: 'TAB'\n      }, {\n        key: 8,\n        value: 'DELETE'\n      }, {\n        key: 13,\n        value: 'ENTER'\n      }, {\n        key: 27,\n        value: 'ESCAPE'\n      }, {\n        key: 32,\n        value: 'SPACE'\n      }, {\n        key: 38,\n        value: 'UP'\n      }, {\n        key: 40,\n        value: 'DOWN'\n      }];\n    }\n  }]);\n\n  return TributeEvents;\n}();\n\nvar _default = TributeEvents;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar TributeMenuEvents =\n/*#__PURE__*/\nfunction () {\n  function TributeMenuEvents(tribute) {\n    _classCallCheck(this, TributeMenuEvents);\n\n    this.tribute = tribute;\n    this.tribute.menuEvents = this;\n    this.menu = this.tribute.menu;\n  }\n\n  _createClass(TributeMenuEvents, [{\n    key: \"bind\",\n    value: function bind(menu) {\n      var _this = this;\n\n      this.menuClickEvent = this.tribute.events.click.bind(null, this);\n      this.menuContainerScrollEvent = this.debounce(function () {\n        if (_this.tribute.isActive) {\n          _this.tribute.showMenuFor(_this.tribute.current.element, false);\n        }\n      }, 300, false);\n      this.windowResizeEvent = this.debounce(function () {\n        if (_this.tribute.isActive) {\n          _this.tribute.range.positionMenuAtCaret(true);\n        }\n      }, 300, false); // fixes IE11 issues with mousedown\n\n      this.tribute.range.getDocument().addEventListener('MSPointerDown', this.menuClickEvent, false);\n      this.tribute.range.getDocument().addEventListener('mousedown', this.menuClickEvent, false);\n      window.addEventListener('resize', this.windowResizeEvent);\n\n      if (this.menuContainer) {\n        this.menuContainer.addEventListener('scroll', this.menuContainerScrollEvent, false);\n      } else {\n        window.addEventListener('scroll', this.menuContainerScrollEvent);\n      }\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(menu) {\n      this.tribute.range.getDocument().removeEventListener('mousedown', this.menuClickEvent, false);\n      this.tribute.range.getDocument().removeEventListener('MSPointerDown', this.menuClickEvent, false);\n      window.removeEventListener('resize', this.windowResizeEvent);\n\n      if (this.menuContainer) {\n        this.menuContainer.removeEventListener('scroll', this.menuContainerScrollEvent, false);\n      } else {\n        window.removeEventListener('scroll', this.menuContainerScrollEvent);\n      }\n    }\n  }, {\n    key: \"debounce\",\n    value: function debounce(func, wait, immediate) {\n      var _this2 = this,\n          _arguments = arguments;\n\n      var timeout;\n      return function () {\n        var context = _this2,\n            args = _arguments;\n\n        var later = function later() {\n          timeout = null;\n          if (!immediate) func.apply(context, args);\n        };\n\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n      };\n    }\n  }]);\n\n  return TributeMenuEvents;\n}();\n\nvar _default = TributeMenuEvents;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Thanks to https://github.com/jeff-collins/ment.io\nvar TributeRange =\n/*#__PURE__*/\nfunction () {\n  function TributeRange(tribute) {\n    _classCallCheck(this, TributeRange);\n\n    this.tribute = tribute;\n    this.tribute.range = this;\n  }\n\n  _createClass(TributeRange, [{\n    key: \"getDocument\",\n    value: function getDocument() {\n      var iframe;\n\n      if (this.tribute.current.collection) {\n        iframe = this.tribute.current.collection.iframe;\n      }\n\n      if (!iframe) {\n        return document;\n      }\n\n      return iframe.contentWindow.document;\n    }\n  }, {\n    key: \"positionMenuAtCaret\",\n    value: function positionMenuAtCaret(scrollTo) {\n      var _this = this;\n\n      var context = this.tribute.current,\n          coordinates;\n      var info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (typeof info !== 'undefined') {\n        if (!this.tribute.positionMenu) {\n          this.tribute.menu.style.cssText = \"display: block;\";\n          return;\n        }\n\n        if (!this.isContentEditable(context.element)) {\n          coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element, info.mentionPosition);\n        } else {\n          coordinates = this.getContentEditableCaretPosition(info.mentionPosition);\n        }\n\n        this.tribute.menu.style.cssText = \"top: \".concat(coordinates.top, \"px;\\n                                     left: \").concat(coordinates.left, \"px;\\n                                     right: \").concat(coordinates.right, \"px;\\n                                     bottom: \").concat(coordinates.bottom, \"px;\\n                                     position: absolute;\\n                                     display: block;\");\n\n        if (coordinates.left === 'auto') {\n          this.tribute.menu.style.left = 'auto';\n        }\n\n        if (coordinates.top === 'auto') {\n          this.tribute.menu.style.top = 'auto';\n        }\n\n        if (scrollTo) this.scrollIntoView();\n        window.setTimeout(function () {\n          var menuDimensions = {\n            width: _this.tribute.menu.offsetWidth,\n            height: _this.tribute.menu.offsetHeight\n          };\n\n          var menuIsOffScreen = _this.isMenuOffScreen(coordinates, menuDimensions);\n\n          var menuIsOffScreenHorizontally = window.innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right);\n          var menuIsOffScreenVertically = window.innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom);\n\n          if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\n            _this.tribute.menu.style.cssText = 'display: none';\n\n            _this.positionMenuAtCaret(scrollTo);\n          }\n        }, 0);\n      } else {\n        this.tribute.menu.style.cssText = 'display: none';\n      }\n    }\n  }, {\n    key: \"selectElement\",\n    value: function selectElement(targetElement, path, offset) {\n      var range;\n      var elem = targetElement;\n\n      if (path) {\n        for (var i = 0; i < path.length; i++) {\n          elem = elem.childNodes[path[i]];\n\n          if (elem === undefined) {\n            return;\n          }\n\n          while (elem.length < offset) {\n            offset -= elem.length;\n            elem = elem.nextSibling;\n          }\n\n          if (elem.childNodes.length === 0 && !elem.length) {\n            elem = elem.previousSibling;\n          }\n        }\n      }\n\n      var sel = this.getWindowSelection();\n      range = this.getDocument().createRange();\n      range.setStart(elem, offset);\n      range.setEnd(elem, offset);\n      range.collapse(true);\n\n      try {\n        sel.removeAllRanges();\n      } catch (error) {}\n\n      sel.addRange(range);\n      targetElement.focus();\n    }\n  }, {\n    key: \"replaceTriggerText\",\n    value: function replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\n      var info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (info !== undefined) {\n        var context = this.tribute.current;\n        var replaceEvent = new CustomEvent('tribute-replaced', {\n          detail: {\n            item: item,\n            instance: context,\n            context: info,\n            event: originalEvent\n          }\n        });\n\n        if (!this.isContentEditable(context.element)) {\n          var myField = this.tribute.current.element;\n          var textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : ' ';\n          text += textSuffix;\n          var startPos = info.mentionPosition;\n          var endPos = info.mentionPosition + info.mentionText.length + textSuffix.length;\n          myField.value = myField.value.substring(0, startPos) + text + myField.value.substring(endPos, myField.value.length);\n          myField.selectionStart = startPos + text.length;\n          myField.selectionEnd = startPos + text.length;\n        } else {\n          // add a space to the end of the pasted text\n          var _textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : '\\xA0';\n\n          text += _textSuffix;\n          this.pasteHtml(text, info.mentionPosition, info.mentionPosition + info.mentionText.length + !this.tribute.autocompleteMode);\n        }\n\n        context.element.dispatchEvent(replaceEvent);\n      }\n    }\n  }, {\n    key: \"pasteHtml\",\n    value: function pasteHtml(html, startPos, endPos) {\n      var range, sel;\n      sel = this.getWindowSelection();\n      range = this.getDocument().createRange();\n      range.setStart(sel.anchorNode, startPos);\n      range.setEnd(sel.anchorNode, endPos);\n      range.deleteContents();\n      var el = this.getDocument().createElement('div');\n      el.innerHTML = html;\n      var frag = this.getDocument().createDocumentFragment(),\n          node,\n          lastNode;\n\n      while (node = el.firstChild) {\n        lastNode = frag.appendChild(node);\n      }\n\n      range.insertNode(frag); // Preserve the selection\n\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        sel.removeAllRanges();\n        sel.addRange(range);\n      }\n    }\n  }, {\n    key: \"getWindowSelection\",\n    value: function getWindowSelection() {\n      if (this.tribute.collection.iframe) {\n        return this.tribute.collection.iframe.contentWindow.getSelection();\n      }\n\n      return window.getSelection();\n    }\n  }, {\n    key: \"getNodePositionInParent\",\n    value: function getNodePositionInParent(element) {\n      if (element.parentNode === null) {\n        return 0;\n      }\n\n      for (var i = 0; i < element.parentNode.childNodes.length; i++) {\n        var node = element.parentNode.childNodes[i];\n\n        if (node === element) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: \"getContentEditableSelectedPath\",\n    value: function getContentEditableSelectedPath(ctx) {\n      var sel = this.getWindowSelection();\n      var selected = sel.anchorNode;\n      var path = [];\n      var offset;\n\n      if (selected != null) {\n        var i;\n        var ce = selected.contentEditable;\n\n        while (selected !== null && ce !== 'true') {\n          i = this.getNodePositionInParent(selected);\n          path.push(i);\n          selected = selected.parentNode;\n\n          if (selected !== null) {\n            ce = selected.contentEditable;\n          }\n        }\n\n        path.reverse(); // getRangeAt may not exist, need alternative\n\n        offset = sel.getRangeAt(0).startOffset;\n        return {\n          selected: selected,\n          path: path,\n          offset: offset\n        };\n      }\n    }\n  }, {\n    key: \"getTextPrecedingCurrentSelection\",\n    value: function getTextPrecedingCurrentSelection() {\n      var context = this.tribute.current,\n          text = '';\n\n      if (!this.isContentEditable(context.element)) {\n        var textComponent = this.tribute.current.element;\n\n        if (textComponent) {\n          var startPos = textComponent.selectionStart;\n\n          if (textComponent.value && startPos >= 0) {\n            text = textComponent.value.substring(0, startPos);\n          }\n        }\n      } else {\n        var selectedElem = this.getWindowSelection().anchorNode;\n\n        if (selectedElem != null) {\n          var workingNodeContent = selectedElem.textContent;\n          var selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset;\n\n          if (workingNodeContent && selectStartOffset >= 0) {\n            text = workingNodeContent.substring(0, selectStartOffset);\n          }\n        }\n      }\n\n      return text;\n    }\n  }, {\n    key: \"getLastWordInText\",\n    value: function getLastWordInText(text) {\n      text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\n\n      var wordsArray = text.split(/\\s+/);\n      var worldsCount = wordsArray.length - 1;\n      return wordsArray[worldsCount].trim();\n    }\n  }, {\n    key: \"getTriggerInfo\",\n    value: function getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\n      var _this2 = this;\n\n      var ctx = this.tribute.current;\n      var selected, path, offset;\n\n      if (!this.isContentEditable(ctx.element)) {\n        selected = this.tribute.current.element;\n      } else {\n        var selectionInfo = this.getContentEditableSelectedPath(ctx);\n\n        if (selectionInfo) {\n          selected = selectionInfo.selected;\n          path = selectionInfo.path;\n          offset = selectionInfo.offset;\n        }\n      }\n\n      var effectiveRange = this.getTextPrecedingCurrentSelection();\n      var lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange);\n\n      if (isAutocomplete) {\n        return {\n          mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\n          mentionText: lastWordOfEffectiveRange,\n          mentionSelectedElement: selected,\n          mentionSelectedPath: path,\n          mentionSelectedOffset: offset\n        };\n      }\n\n      if (effectiveRange !== undefined && effectiveRange !== null) {\n        var mostRecentTriggerCharPos = -1;\n        var triggerChar;\n        this.tribute.collection.forEach(function (config) {\n          var c = config.trigger;\n          var idx = config.requireLeadingSpace ? _this2.lastIndexWithLeadingSpace(effectiveRange, c) : effectiveRange.lastIndexOf(c);\n\n          if (idx > mostRecentTriggerCharPos) {\n            mostRecentTriggerCharPos = idx;\n            triggerChar = c;\n            requireLeadingSpace = config.requireLeadingSpace;\n          }\n        });\n\n        if (mostRecentTriggerCharPos >= 0 && (mostRecentTriggerCharPos === 0 || !requireLeadingSpace || /[\\xA0\\s]/g.test(effectiveRange.substring(mostRecentTriggerCharPos - 1, mostRecentTriggerCharPos)))) {\n          var currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + 1, effectiveRange.length);\n          triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + 1);\n          var firstSnippetChar = currentTriggerSnippet.substring(0, 1);\n          var leadingSpace = currentTriggerSnippet.length > 0 && (firstSnippetChar === ' ' || firstSnippetChar === '\\xA0');\n\n          if (hasTrailingSpace) {\n            currentTriggerSnippet = currentTriggerSnippet.trim();\n          }\n\n          var regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\n          this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\n\n          if (!leadingSpace && (menuAlreadyActive || !regex.test(currentTriggerSnippet))) {\n            return {\n              mentionPosition: mostRecentTriggerCharPos,\n              mentionText: currentTriggerSnippet,\n              mentionSelectedElement: selected,\n              mentionSelectedPath: path,\n              mentionSelectedOffset: offset,\n              mentionTriggerChar: triggerChar\n            };\n          }\n        }\n      }\n    }\n  }, {\n    key: \"lastIndexWithLeadingSpace\",\n    value: function lastIndexWithLeadingSpace(str, _char) {\n      var reversedStr = str.split('').reverse().join('');\n      var index = -1;\n\n      for (var cidx = 0, len = str.length; cidx < len; cidx++) {\n        var firstChar = cidx === str.length - 1;\n        var leadingSpace = /\\s/.test(reversedStr[cidx + 1]);\n        var match = _char === reversedStr[cidx];\n\n        if (match && (firstChar || leadingSpace)) {\n          index = str.length - 1 - cidx;\n          break;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: \"isContentEditable\",\n    value: function isContentEditable(element) {\n      return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n    }\n  }, {\n    key: \"isMenuOffScreen\",\n    value: function isMenuOffScreen(coordinates, menuDimensions) {\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height;\n      var menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width;\n      var menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height;\n      var menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width;\n      return {\n        top: menuTop < Math.floor(windowTop),\n        right: menuRight > Math.ceil(windowLeft + windowWidth),\n        bottom: menuBottom > Math.ceil(windowTop + windowHeight),\n        left: menuLeft < Math.floor(windowLeft)\n      };\n    }\n  }, {\n    key: \"getMenuDimensions\",\n    value: function getMenuDimensions() {\n      // Width of the menu depends of its contents and position\n      // We must check what its width would be without any obstruction\n      // This way, we can achieve good positioning for flipping the menu\n      var dimensions = {\n        width: null,\n        height: null\n      };\n      this.tribute.menu.style.cssText = \"top: 0px;\\n                                 left: 0px;\\n                                 position: fixed;\\n                                 display: block;\\n                                 visibility; hidden;\";\n      dimensions.width = this.tribute.menu.offsetWidth;\n      dimensions.height = this.tribute.menu.offsetHeight;\n      this.tribute.menu.style.cssText = \"display: none;\";\n      return dimensions;\n    }\n  }, {\n    key: \"getTextAreaOrInputUnderlinePosition\",\n    value: function getTextAreaOrInputUnderlinePosition(element, position, flipped) {\n      var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n      var isFirefox = window.mozInnerScreenX !== null;\n      var div = this.getDocument().createElement('div');\n      div.id = 'input-textarea-caret-position-mirror-div';\n      this.getDocument().body.appendChild(div);\n      var style = div.style;\n      var computed = window.getComputedStyle ? getComputedStyle(element) : element.currentStyle;\n      style.whiteSpace = 'pre-wrap';\n\n      if (element.nodeName !== 'INPUT') {\n        style.wordWrap = 'break-word';\n      } // position off-screen\n\n\n      style.position = 'absolute';\n      style.visibility = 'hidden'; // transfer the element's properties to the div\n\n      properties.forEach(function (prop) {\n        style[prop] = computed[prop];\n      });\n\n      if (isFirefox) {\n        style.width = \"\".concat(parseInt(computed.width) - 2, \"px\");\n        if (element.scrollHeight > parseInt(computed.height)) style.overflowY = 'scroll';\n      } else {\n        style.overflow = 'hidden';\n      }\n\n      div.textContent = element.value.substring(0, position);\n\n      if (element.nodeName === 'INPUT') {\n        div.textContent = div.textContent.replace(/\\s/g, ' ');\n      }\n\n      var span = this.getDocument().createElement('span');\n      span.textContent = element.value.substring(position) || '.';\n      div.appendChild(span);\n      var rect = element.getBoundingClientRect();\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var top = 0;\n      var left = 0;\n\n      if (this.menuContainerIsBody) {\n        top = rect.top;\n        left = rect.left;\n      }\n\n      var coordinates = {\n        top: top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\n        left: left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\n      };\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var menuDimensions = this.getMenuDimensions();\n      var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.right) {\n        coordinates.right = windowWidth - coordinates.left;\n        coordinates.left = 'auto';\n      }\n\n      var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n      if (menuIsOffScreen.bottom) {\n        var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n        var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n        coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop);\n        coordinates.top = 'auto';\n      }\n\n      menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.left) {\n        coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n        delete coordinates.right;\n      }\n\n      if (menuIsOffScreen.top) {\n        coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n        delete coordinates.bottom;\n      }\n\n      this.getDocument().body.removeChild(div);\n      return coordinates;\n    }\n  }, {\n    key: \"getContentEditableCaretPosition\",\n    value: function getContentEditableCaretPosition(selectedNodePosition) {\n      var markerTextChar = '';\n      var markerEl,\n          markerId = \"sel_\".concat(new Date().getTime(), \"_\").concat(Math.random().toString().substr(2));\n      var range;\n      var sel = this.getWindowSelection();\n      var prevRange = sel.getRangeAt(0);\n      range = this.getDocument().createRange();\n      range.setStart(sel.anchorNode, selectedNodePosition);\n      range.setEnd(sel.anchorNode, selectedNodePosition);\n      range.collapse(false); // Create the marker element containing a single invisible character using DOM methods and insert it\n\n      markerEl = this.getDocument().createElement('span');\n      markerEl.id = markerId;\n      markerEl.appendChild(this.getDocument().createTextNode(markerTextChar));\n      range.insertNode(markerEl);\n      sel.removeAllRanges();\n      sel.addRange(prevRange);\n      var rect = markerEl.getBoundingClientRect();\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var left = 0;\n      var top = 0;\n\n      if (this.menuContainerIsBody) {\n        left = rect.left;\n        top = rect.top;\n      } else {\n        left = markerEl.offsetLeft;\n        top = markerEl.offsetTop;\n      }\n\n      var coordinates = {\n        left: left + windowLeft,\n        top: top + markerEl.offsetHeight + windowTop\n      };\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var menuDimensions = this.getMenuDimensions();\n      var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.right) {\n        coordinates.left = 'auto';\n        coordinates.right = windowWidth - rect.left - windowLeft;\n      }\n\n      var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n      if (menuIsOffScreen.bottom) {\n        var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n        var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n        coordinates.top = 'auto';\n        coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top);\n      }\n\n      menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.left) {\n        coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n        delete coordinates.right;\n      }\n\n      if (menuIsOffScreen.top) {\n        coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n        delete coordinates.bottom;\n      }\n\n      markerEl.parentNode.removeChild(markerEl);\n      return coordinates;\n    }\n  }, {\n    key: \"scrollIntoView\",\n    value: function scrollIntoView(elem) {\n      var reasonableBuffer = 20,\n          clientRect;\n      var maxScrollDisplacement = 100;\n      var e = this.menu;\n      if (typeof e === 'undefined') return;\n\n      while (clientRect === undefined || clientRect.height === 0) {\n        clientRect = e.getBoundingClientRect();\n\n        if (clientRect.height === 0) {\n          e = e.childNodes[0];\n\n          if (e === undefined || !e.getBoundingClientRect) {\n            return;\n          }\n        }\n      }\n\n      var elemTop = clientRect.top;\n      var elemBottom = elemTop + clientRect.height;\n\n      if (elemTop < 0) {\n        window.scrollTo(0, window.pageYOffset + clientRect.top - reasonableBuffer);\n      } else if (elemBottom > window.innerHeight) {\n        var maxY = window.pageYOffset + clientRect.top - reasonableBuffer;\n\n        if (maxY - window.pageYOffset > maxScrollDisplacement) {\n          maxY = window.pageYOffset + maxScrollDisplacement;\n        }\n\n        var targetY = window.pageYOffset - (window.innerHeight - elemBottom);\n\n        if (targetY > maxY) {\n          targetY = maxY;\n        }\n\n        window.scrollTo(0, targetY);\n      }\n    }\n  }, {\n    key: \"menuContainerIsBody\",\n    get: function get() {\n      return this.tribute.menuContainer === document.body || !this.tribute.menuContainer;\n    }\n  }]);\n\n  return TributeRange;\n}();\n\nvar _default = TributeRange;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Thanks to https://github.com/mattyork/fuzzy\nvar TributeSearch =\n/*#__PURE__*/\nfunction () {\n  function TributeSearch(tribute) {\n    _classCallCheck(this, TributeSearch);\n\n    this.tribute = tribute;\n    this.tribute.search = this;\n  }\n\n  _createClass(TributeSearch, [{\n    key: \"simpleFilter\",\n    value: function simpleFilter(pattern, array) {\n      var _this = this;\n\n      return array.filter(function (string) {\n        return _this.test(pattern, string);\n      });\n    }\n  }, {\n    key: \"test\",\n    value: function test(pattern, string) {\n      return this.match(pattern, string) !== null;\n    }\n  }, {\n    key: \"match\",\n    value: function match(pattern, string, opts) {\n      opts = opts || {};\n      var patternIdx = 0,\n          result = [],\n          len = string.length,\n          totalScore = 0,\n          currScore = 0,\n          pre = opts.pre || '',\n          post = opts.post || '',\n          compareString = opts.caseSensitive && string || string.toLowerCase(),\n          ch,\n          compareChar;\n\n      if (opts.skip) {\n        return {\n          rendered: string,\n          score: 0\n        };\n      }\n\n      pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n      var patternCache = this.traverse(compareString, pattern, 0, 0, []);\n\n      if (!patternCache) {\n        return null;\n      }\n\n      return {\n        rendered: this.render(string, patternCache.cache, pre, post),\n        score: patternCache.score\n      };\n    }\n  }, {\n    key: \"traverse\",\n    value: function traverse(string, pattern, stringIndex, patternIndex, patternCache) {\n      // if the pattern search at end\n      if (pattern.length === patternIndex) {\n        // calculate score and copy the cache containing the indices where it's found\n        return {\n          score: this.calculateScore(patternCache),\n          cache: patternCache.slice()\n        };\n      } // if string at end or remaining pattern > remaining string\n\n\n      if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\n        return undefined;\n      }\n\n      var c = pattern[patternIndex];\n      var index = string.indexOf(c, stringIndex);\n      var best, temp;\n\n      while (index > -1) {\n        patternCache.push(index);\n        temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache);\n        patternCache.pop(); // if downstream traversal failed, return best answer so far\n\n        if (!temp) {\n          return best;\n        }\n\n        if (!best || best.score < temp.score) {\n          best = temp;\n        }\n\n        index = string.indexOf(c, index + 1);\n      }\n\n      return best;\n    }\n  }, {\n    key: \"calculateScore\",\n    value: function calculateScore(patternCache) {\n      var score = 0;\n      var temp = 1;\n      patternCache.forEach(function (index, i) {\n        if (i > 0) {\n          if (patternCache[i - 1] + 1 === index) {\n            temp += temp + 1;\n          } else {\n            temp = 1;\n          }\n        }\n\n        score += temp;\n      });\n      return score;\n    }\n  }, {\n    key: \"render\",\n    value: function render(string, indices, pre, post) {\n      var rendered = string.substring(0, indices[0]);\n      indices.forEach(function (index, i) {\n        rendered += pre + string[index] + post + string.substring(index + 1, indices[i + 1] ? indices[i + 1] : string.length);\n      });\n      return rendered;\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(pattern, arr, opts) {\n      var _this2 = this;\n\n      opts = opts || {};\n      return arr.reduce(function (prev, element, idx, arr) {\n        var str = element;\n\n        if (opts.extract) {\n          str = opts.extract(element);\n\n          if (!str) {\n            // take care of undefineds / nulls / etc.\n            str = '';\n          }\n        }\n\n        var rendered = _this2.match(pattern, str, opts);\n\n        if (rendered != null) {\n          prev[prev.length] = {\n            string: rendered.rendered,\n            score: rendered.score,\n            index: idx,\n            original: element\n          };\n        }\n\n        return prev;\n      }, []).sort(function (a, b) {\n        var compare = b.score - a.score;\n        if (compare) return compare;\n        return a.index - b.index;\n      });\n    }\n  }]);\n\n  return TributeSearch;\n}();\n\nvar _default = TributeSearch;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _Tribute = _interopRequireDefault(require(\"./Tribute\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n* Tribute.js\n* Native ES6 JavaScript @mention Plugin\n**/\nvar _default = _Tribute[\"default\"];\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{\"./Tribute\":1}],7:[function(require,module,exports){\n\"use strict\";\n\nif (!Array.prototype.find) {\n  Array.prototype.find = function (predicate) {\n    if (this === null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n\n    return undefined;\n  };\n}\n\nif (window && typeof window.CustomEvent !== \"function\") {\n  var CustomEvent = function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  };\n\n  if (typeof window.Event !== 'undefined') {\n    CustomEvent.prototype = window.Event.prototype;\n  }\n\n  window.CustomEvent = CustomEvent;\n}\n\n},{}]},{},[6])(6)\n});\n"]},"metadata":{},"sourceType":"module"}