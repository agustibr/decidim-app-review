{"ast":null,"code":"/**\n * Makes the #select-identity-button to open a popup for the user to\n * select with which identity they want to perform an action.\n *\n */\n$(function () {\n  var button = $(\"#select-identity-button\"),\n      identitiesUrl = null,\n      userIdentitiesDialog = $(\"#user-identities\");\n\n  if (userIdentitiesDialog.length) {\n    identitiesUrl = userIdentitiesDialog.data(\"reveal-identities-url\");\n    button.click(function () {\n      $.ajax(identitiesUrl).done(function (response) {\n        userIdentitiesDialog.html(response).foundation(\"open\");\n        button.trigger(\"ajax:success\");\n      });\n    });\n  }\n});\n/**\n * Manage the identity selector for endorsements.\n *\n */\n\n$(function () {\n  $(\"#select-identity-button\").on(\"ajax:success\", function () {\n    // once reveal popup has been rendered register event callbacks\n    $(\"#user-identities ul.reveal__list li\").each(function (index, elem) {\n      var liTag = $(elem);\n      liTag.on(\"click\", function () {\n        var method = liTag.data(\"method\"),\n            urlDataAttr = null;\n\n        if (method === \"POST\") {\n          urlDataAttr = \"create_url\";\n        } else {\n          urlDataAttr = \"destroy_url\";\n        }\n\n        $.ajax({\n          url: liTag.data(urlDataAttr),\n          method: method,\n          dataType: \"script\",\n          success: function success() {\n            if (liTag.hasClass(\"selected\")) {\n              liTag.removeClass(\"selected\");\n              liTag.find(\".icon--circle-check\").addClass(\"invisible\");\n              liTag.data(\"method\", \"POST\");\n            } else {\n              liTag.addClass(\"selected\");\n              liTag.find(\".icon--circle-check\").removeClass(\"invisible\");\n              liTag.data(\"method\", \"DELETE\");\n            }\n          }\n        });\n      });\n    });\n  });\n});","map":{"version":3,"mappings":"AAAA;AACA;AACA;AACA;AACA;AACAA,CAAC,CAAC,YAAM;EACN,IAAIC,MAAM,GAAGD,CAAC,CAAC,yBAAD,CAAd;EAAA,IACIE,aAAa,GAAG,IADpB;EAAA,IAEIC,oBAAoB,GAAGH,CAAC,CAAC,kBAAD,CAF5B;;EAIA,IAAIG,oBAAoB,CAACC,MAAzB,EAAiC;IAC/BF,aAAa,GAAGC,oBAAoB,CAACE,IAArBF,CAA0B,uBAA1BA,CAAhBD;IAEAD,MAAM,CAACK,KAAPL,CAAa,YAAY;MACvBD,CAAC,CAACO,IAAFP,CAAOE,aAAPF,EAAsBQ,IAAtBR,CAA2B,UAASS,QAAT,EAAmB;QAC5CN,oBAAoB,CAACO,IAArBP,CAA0BM,QAA1BN,EAAoCQ,UAApCR,CAA+C,MAA/CA;QACAF,MAAM,CAACW,OAAPX,CAAe,cAAfA;MAFF;IADF;EAMD;AAdF,EAADD;AAkBA;AACA;AACA;AACA;;AACAA,CAAC,CAAC,YAAM;EACNA,CAAC,CAAC,yBAAD,CAADA,CAA6Ba,EAA7Bb,CAAgC,cAAhCA,EAAgD,YAAW;IACzD;IACAA,CAAC,CAAC,qCAAD,CAADA,CAAyCc,IAAzCd,CAA8C,UAASe,KAAT,EAAgBC,IAAhB,EAAsB;MAClE,IAAIC,KAAK,GAAGjB,CAAC,CAACgB,IAAD,CAAb;MACAC,KAAK,CAACJ,EAANI,CAAS,OAATA,EAAkB,YAAW;QAC3B,IAAIC,MAAM,GAAGD,KAAK,CAACZ,IAANY,CAAW,QAAXA,CAAb;QAAA,IACIE,WAAW,GAAG,IADlB;;QAEA,IAAID,MAAM,KAAK,MAAf,EAAuB;UACrBC,WAAW,GAAG,YAAdA;QADF,OAEO;UACLA,WAAW,GAAG,aAAdA;QACD;;QACDnB,CAAC,CAACO,IAAFP,CAAO;UACLoB,GAAG,EAAEH,KAAK,CAACZ,IAANY,CAAWE,WAAXF,CADA;UAELC,MAAM,EAAEA,MAFH;UAGLG,QAAQ,EAAE,QAHL;UAILC,OAAO,EAAE,mBAAW;YAClB,IAAIL,KAAK,CAACM,QAANN,CAAe,UAAfA,CAAJ,EAAgC;cAC9BA,KAAK,CAACO,WAANP,CAAkB,UAAlBA;cACAA,KAAK,CAACQ,IAANR,CAAW,qBAAXA,EAAkCS,QAAlCT,CAA2C,WAA3CA;cACAA,KAAK,CAACZ,IAANY,CAAW,QAAXA,EAAqB,MAArBA;YAHF,OAIO;cACLA,KAAK,CAACS,QAANT,CAAe,UAAfA;cACAA,KAAK,CAACQ,IAANR,CAAW,qBAAXA,EAAkCO,WAAlCP,CAA8C,WAA9CA;cACAA,KAAK,CAACZ,IAANY,CAAW,QAAXA,EAAqB,QAArBA;YACD;UACF;QAdI,CAAPjB;MARF;IAFF;EAFF;AADD,EAADA","names":["$","button","identitiesUrl","userIdentitiesDialog","length","data","click","ajax","done","response","html","foundation","trigger","on","each","index","elem","liTag","method","urlDataAttr","url","dataType","success","hasClass","removeClass","find","addClass"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-core/app/packs/src/decidim/identity_selector_dialog.js"],"sourcesContent":["/**\n * Makes the #select-identity-button to open a popup for the user to\n * select with which identity they want to perform an action.\n *\n */\n$(() => {\n  let button = $(\"#select-identity-button\"),\n      identitiesUrl = null,\n      userIdentitiesDialog = $(\"#user-identities\");\n\n  if (userIdentitiesDialog.length) {\n    identitiesUrl = userIdentitiesDialog.data(\"reveal-identities-url\");\n\n    button.click(function () {\n      $.ajax(identitiesUrl).done(function(response) {\n        userIdentitiesDialog.html(response).foundation(\"open\");\n        button.trigger(\"ajax:success\")\n      });\n    });\n  }\n});\n\n\n/**\n * Manage the identity selector for endorsements.\n *\n */\n$(() => {\n  $(\"#select-identity-button\").on(\"ajax:success\", function() {\n    // once reveal popup has been rendered register event callbacks\n    $(\"#user-identities ul.reveal__list li\").each(function(index, elem) {\n      let liTag = $(elem)\n      liTag.on(\"click\", function() {\n        let method = liTag.data(\"method\"),\n            urlDataAttr = null;\n        if (method === \"POST\") {\n          urlDataAttr = \"create_url\";\n        } else {\n          urlDataAttr = \"destroy_url\";\n        }\n        $.ajax({\n          url: liTag.data(urlDataAttr),\n          method: method,\n          dataType: \"script\",\n          success: function() {\n            if (liTag.hasClass(\"selected\")) {\n              liTag.removeClass(\"selected\")\n              liTag.find(\".icon--circle-check\").addClass(\"invisible\")\n              liTag.data(\"method\", \"POST\")\n            } else {\n              liTag.addClass(\"selected\")\n              liTag.find(\".icon--circle-check\").removeClass(\"invisible\")\n              liTag.data(\"method\", \"DELETE\")\n            }\n          }\n        })\n      })\n    });\n  });\n})\n"]},"metadata":{},"sourceType":"module"}