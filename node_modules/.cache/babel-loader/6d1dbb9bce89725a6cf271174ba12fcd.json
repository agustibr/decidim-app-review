{"ast":null,"code":"import createMapController from \"src/decidim/map/factory\";\n$(function () {\n  // Load the map controller factory method in the document.ready handler to\n  // allow overriding it by any script that is loaded before the document is\n  // ready.\n  var $mapElements = $(\"[data-decidim-map]\");\n\n  if ($mapElements.length < 1 && $(\"#map\").length > 0) {\n    throw new Error(\"DEPRECATION: Please update your maps customizations or include 'decidim/map/legacy.js' for legacy support!\");\n  }\n\n  $mapElements.each(function (_i, el) {\n    var $map = $(el);\n    var mapId = $map.attr(\"id\");\n\n    if (!mapId) {\n      mapId = \"map-\".concat(Math.random().toString(36).substr(2, 9));\n      $map.attr(\"id\", mapId);\n    }\n\n    var mapConfig = $map.data(\"decidim-map\");\n    var ctrl = createMapController(mapId, mapConfig);\n    var map = ctrl.load();\n    $map.data(\"map\", map);\n    $map.data(\"map-controller\", ctrl);\n    $map.trigger(\"configure.decidim\", [map, mapConfig]);\n    ctrl.start(); // Indicates the map is loaded with the map objects initialized and ready\n    // to be used.\n\n    $map.trigger(\"ready.decidim\", [map, mapConfig]);\n  });\n});","map":{"version":3,"mappings":"AAAA,OAAOA,mBAAP,MAAgC,yBAAhC;AAEAC,CAAC,CAAC,YAAM;EACN;EACA;EACA;EACA,IAAIC,YAAY,GAAGD,CAAC,CAAC,oBAAD,CAApB;;EACA,IAAIC,YAAY,CAACC,MAAbD,GAAsB,CAAtBA,IAA2BD,CAAC,CAAC,MAAD,CAADA,CAAUE,MAAVF,GAAmB,CAAlD,EAAqD;IACnD,MAAM,IAAIG,KAAJ,CACJ,4GADI,CAAN;EAGD;;EAEDF,YAAY,CAACG,IAAbH,CAAkB,UAACI,EAAD,EAAKC,EAAL,EAAY;IAC5B,IAAMC,IAAI,GAAGP,CAAC,CAACM,EAAD,CAAd;IACA,IAAIE,KAAK,GAAGD,IAAI,CAACE,IAALF,CAAU,IAAVA,CAAZ;;IACA,IAAI,CAACC,KAAL,EAAY;MACVA,KAAK,iBAAUE,IAAI,CAACC,MAALD,GAAcE,QAAdF,CAAuB,EAAvBA,EAA2BG,MAA3BH,CAAkC,CAAlCA,EAAqC,CAArCA,CAAV,CAALF;MACAD,IAAI,CAACE,IAALF,CAAU,IAAVA,EAAgBC,KAAhBD;IACD;;IAED,IAAMO,SAAS,GAAGP,IAAI,CAACQ,IAALR,CAAU,aAAVA,CAAlB;IACA,IAAMS,IAAI,GAAGjB,mBAAmB,CAACS,KAAD,EAAQM,SAAR,CAAhC;IACA,IAAMG,GAAG,GAAGD,IAAI,CAACE,IAALF,EAAZ;IAEAT,IAAI,CAACQ,IAALR,CAAU,KAAVA,EAAiBU,GAAjBV;IACAA,IAAI,CAACQ,IAALR,CAAU,gBAAVA,EAA4BS,IAA5BT;IAEAA,IAAI,CAACY,OAALZ,CAAa,mBAAbA,EAAkC,CAACU,GAAD,EAAMH,SAAN,CAAlCP;IAEAS,IAAI,CAACI,KAALJ,GAjB4B,CAmB5B;IACA;;IACAT,IAAI,CAACY,OAALZ,CAAa,eAAbA,EAA8B,CAACU,GAAD,EAAMH,SAAN,CAA9BP;EArBF;AAXD,EAADP","names":["createMapController","$","$mapElements","length","Error","each","_i","el","$map","mapId","attr","Math","random","toString","substr","mapConfig","data","ctrl","map","load","trigger","start"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-core/app/packs/src/decidim/map.js"],"sourcesContent":["import createMapController from \"src/decidim/map/factory\"\n\n$(() => {\n  // Load the map controller factory method in the document.ready handler to\n  // allow overriding it by any script that is loaded before the document is\n  // ready.\n  let $mapElements = $(\"[data-decidim-map]\");\n  if ($mapElements.length < 1 && $(\"#map\").length > 0) {\n    throw new Error(\n      \"DEPRECATION: Please update your maps customizations or include 'decidim/map/legacy.js' for legacy support!\"\n    );\n  }\n\n  $mapElements.each((_i, el) => {\n    const $map = $(el);\n    let mapId = $map.attr(\"id\");\n    if (!mapId) {\n      mapId = `map-${Math.random().toString(36).substr(2, 9)}`;\n      $map.attr(\"id\", mapId);\n    }\n\n    const mapConfig = $map.data(\"decidim-map\");\n    const ctrl = createMapController(mapId, mapConfig);\n    const map = ctrl.load();\n\n    $map.data(\"map\", map);\n    $map.data(\"map-controller\", ctrl);\n\n    $map.trigger(\"configure.decidim\", [map, mapConfig]);\n\n    ctrl.start();\n\n    // Indicates the map is loaded with the map objects initialized and ready\n    // to be used.\n    $map.trigger(\"ready.decidim\", [map, mapConfig]);\n  });\n});\n"]},"metadata":{},"sourceType":"module"}