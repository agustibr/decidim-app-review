{"ast":null,"code":"/* eslint-disable require-jsdoc */\n\n/* eslint-disable no-prototype-builtins, no-restricted-syntax, no-param-reassign */\nvar callbacks = {};\nexport default function registerCallback(callbackId, callback) {\n  callbacks[callbackId] = callback;\n}\n\nvar unregisterCallback = function unregisterCallback(callbackId) {\n  callbacks[callbackId] = null;\n};\n\nvar pushState = function pushState(url) {\n  var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (window.history) {\n    window.history.pushState(state, null, url);\n  }\n};\n\nvar replaceState = function replaceState(url) {\n  var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (window.history) {\n    window.history.replaceState(state, null, url);\n  }\n};\n\nvar state = function state() {\n  if (window.history) {\n    return window.history.state;\n  }\n\n  return null;\n};\n\nwindow.onpopstate = function (event) {\n  // Ensure the event is caused by user action\n  if (event.isTrusted) {\n    for (var callbackId in callbacks) {\n      if (callbacks.hasOwnProperty(callbackId)) {\n        callbacks[callbackId](event.state);\n      }\n    }\n  }\n};\n\nexport { registerCallback, unregisterCallback, pushState, replaceState, state };","map":{"version":3,"mappings":"AAAA;;AACA;AAEA,IAAIA,SAAS,GAAG,EAAhB;AAEA,eAAe,SAASC,gBAAT,CAA0BC,UAA1B,EAAsCC,QAAtC,EAAgD;EAC7DH,SAAS,CAACE,UAAD,CAATF,GAAwBG,QAAxBH;AACD;;AAED,IAAMI,kBAAkB,GAAG,SAArBA,kBAAqB,CAACF,UAAD,EAAgB;EACzCF,SAAS,CAACE,UAAD,CAATF,GAAwB,IAAxBA;AADF;;AAIA,IAAMK,SAAS,GAAG,SAAZA,SAAY,CAACC,GAAD,EAAuB;EAAA,IAAjBC,KAAiB,uEAAT,IAAS;;EACvC,IAAIC,MAAM,CAACC,OAAX,EAAoB;IAClBD,MAAM,CAACC,OAAPD,CAAeH,SAAfG,CAAyBD,KAAzBC,EAAgC,IAAhCA,EAAsCF,GAAtCE;EACD;AAHH;;AAMA,IAAME,YAAY,GAAG,SAAfA,YAAe,CAACJ,GAAD,EAAuB;EAAA,IAAjBC,KAAiB,uEAAT,IAAS;;EAC1C,IAAIC,MAAM,CAACC,OAAX,EAAoB;IAClBD,MAAM,CAACC,OAAPD,CAAeE,YAAfF,CAA4BD,KAA5BC,EAAmC,IAAnCA,EAA0CF,GAA1CE;EACD;AAHH;;AAMA,IAAMD,KAAK,GAAG,SAARA,KAAQ,GAAM;EAClB,IAAIC,MAAM,CAACC,OAAX,EAAoB;IAClB,OAAOD,MAAM,CAACC,OAAPD,CAAeD,KAAtB;EACD;;EACD,OAAO,IAAP;AAJF;;AAOAC,MAAM,CAACG,UAAPH,GAAoB,UAACI,KAAD,EAAW;EAC7B;EACA,IAAIA,KAAK,CAACC,SAAV,EAAqB;IACnB,KAAK,IAAIX,UAAT,IAAuBF,SAAvB,EAAkC;MAChC,IAAIA,SAAS,CAACc,cAAVd,CAAyBE,UAAzBF,CAAJ,EAA0C;QACxCA,SAAS,CAACE,UAAD,CAATF,CAAsBY,KAAK,CAACL,KAA5BP;MACD;IACF;EACF;AARH;;AAWA,SAASC,gBAAT,EAA2BG,kBAA3B,EAA+CC,SAA/C,EAA0DK,YAA1D,EAAwEH,KAAxE","names":["callbacks","registerCallback","callbackId","callback","unregisterCallback","pushState","url","state","window","history","replaceState","onpopstate","event","isTrusted","hasOwnProperty"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-core/app/packs/src/decidim/history.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable no-prototype-builtins, no-restricted-syntax, no-param-reassign */\n\nlet callbacks = {};\n\nexport default function registerCallback(callbackId, callback) {\n  callbacks[callbackId] = callback;\n}\n\nconst unregisterCallback = (callbackId) => {\n  callbacks[callbackId] = null;\n}\n\nconst pushState = (url, state = null) => {\n  if (window.history) {\n    window.history.pushState(state, null, url);\n  }\n};\n\nconst replaceState = (url, state = null) => {\n  if (window.history) {\n    window.history.replaceState(state, null,  url);\n  }\n};\n\nconst state = () => {\n  if (window.history) {\n    return window.history.state;\n  }\n  return null;\n};\n\nwindow.onpopstate = (event) => {\n  // Ensure the event is caused by user action\n  if (event.isTrusted) {\n    for (let callbackId in callbacks) {\n      if (callbacks.hasOwnProperty(callbackId)) {\n        callbacks[callbackId](event.state);\n      }\n    }\n  }\n}\n\nexport { registerCallback, unregisterCallback, pushState, replaceState, state };\n"]},"metadata":{},"sourceType":"module"}