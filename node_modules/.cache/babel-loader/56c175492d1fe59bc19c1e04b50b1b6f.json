{"ast":null,"code":"import AutoButtonsByPositionComponent from \"src/decidim/admin/auto_buttons_by_position.component\";\nimport AutoLabelByPositionComponent from \"src/decidim/admin/auto_label_by_position.component\";\nimport createDynamicFields from \"src/decidim/admin/dynamic_fields.component\";\nimport createSortList from \"src/decidim/admin/sort_list.component\";\n$(function () {\n  var dynamicFieldDefinitions = [{\n    placeHolderId: \"external-domain-id\",\n    wrapperSelector: \".external-domains\",\n    fieldSelector: \".external-domain\",\n    addFieldSelector: \".add-external-domain\"\n  }];\n  dynamicFieldDefinitions.forEach(function (section) {\n    var fieldSelectorSuffix = section.fieldSelector.replace(\".\", \"\");\n    var autoButtonsByPosition = new AutoButtonsByPositionComponent({\n      listSelector: \"\".concat(section.fieldSelector, \":not(.hidden)\"),\n      hideOnFirstSelector: \".move-up-question\",\n      hideOnLastSelector: \".move-down-question\"\n    });\n    var autoLabelByPosition = new AutoLabelByPositionComponent({\n      listSelector: \"\".concat(section.fieldSelector, \":not(.hidden)\"),\n      labelSelector: \".card-title span:first\",\n      onPositionComputed: function onPositionComputed(el, idx) {\n        $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n      }\n    });\n\n    var createSortableList = function createSortableList() {\n      createSortList(\".external-domains-list:not(.published)\", {\n        handle: \".external-domain-divider\",\n        placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n        forcePlaceholderSize: true,\n        onSortUpdate: function onSortUpdate() {\n          autoLabelByPosition.run();\n          autoButtonsByPosition.run();\n        }\n      });\n    };\n\n    var hideDeletedItem = function hideDeletedItem($target) {\n      var inputDeleted = $target.find(\"input[name$=\\\\[deleted\\\\]]\").val();\n\n      if (inputDeleted === \"true\") {\n        $target.addClass(\"hidden\");\n        $target.hide(); // Allows re-submitting of the form\n\n        $(\"input\", $target).removeAttr(\"required\");\n      }\n    };\n\n    createDynamicFields({\n      placeholderId: section.placeHolderId,\n      wrapperSelector: section.wrapperSelector,\n      containerSelector: \"\".concat(section.wrapperSelector, \"-list\"),\n      fieldSelector: section.fieldSelector,\n      addFieldButtonSelector: section.addFieldSelector,\n      removeFieldButtonSelector: \".remove-\".concat(fieldSelectorSuffix),\n      moveUpFieldButtonSelector: \".move-up-question\",\n      moveDownFieldButtonSelector: \".move-down-question\",\n      onAddField: function onAddField() {\n        createSortableList();\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n      },\n      onRemoveField: function onRemoveField($field) {\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run(); // Allows re-submitting of the form\n\n        $(\"input\", $field).removeAttr(\"required\");\n      },\n      onMoveUpField: function onMoveUpField() {\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n      },\n      onMoveDownField: function onMoveDownField() {\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n      }\n    });\n    createSortableList();\n    $(section.fieldSelector).each(function (_idx, el) {\n      var $target = $(el);\n      hideDeletedItem($target);\n    });\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  });\n});","map":{"version":3,"mappings":"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","names":["AutoButtonsByPositionComponent","AutoLabelByPositionComponent","createDynamicFields","createSortList","$","dynamicFieldDefinitions","placeHolderId","wrapperSelector","fieldSelector","addFieldSelector","forEach","section","fieldSelectorSuffix","replace","autoButtonsByPosition","listSelector","hideOnFirstSelector","hideOnLastSelector","autoLabelByPosition","labelSelector","onPositionComputed","el","idx","find","val","createSortableList","handle","placeholder","forcePlaceholderSize","onSortUpdate","run","hideDeletedItem","$target","inputDeleted","addClass","hide","removeAttr","placeholderId","containerSelector","addFieldButtonSelector","removeFieldButtonSelector","moveUpFieldButtonSelector","moveDownFieldButtonSelector","onAddField","onRemoveField","$field","onMoveUpField","onMoveDownField","each","_idx"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-admin/app/packs/src/decidim/admin/external_domain_whitelist.js"],"sourcesContent":["import AutoButtonsByPositionComponent from \"src/decidim/admin/auto_buttons_by_position.component\"\nimport AutoLabelByPositionComponent from \"src/decidim/admin/auto_label_by_position.component\"\nimport createDynamicFields from \"src/decidim/admin/dynamic_fields.component\"\nimport createSortList from \"src/decidim/admin/sort_list.component\"\n\n$(() => {\n  const dynamicFieldDefinitions = [\n    {\n      placeHolderId: \"external-domain-id\",\n      wrapperSelector: \".external-domains\",\n      fieldSelector: \".external-domain\",\n      addFieldSelector: \".add-external-domain\"\n    }\n  ];\n\n  dynamicFieldDefinitions.forEach((section) => {\n    const fieldSelectorSuffix = section.fieldSelector.replace(\".\", \"\");\n\n    const autoButtonsByPosition = new AutoButtonsByPositionComponent({\n      listSelector: `${section.fieldSelector}:not(.hidden)`,\n      hideOnFirstSelector: \".move-up-question\",\n      hideOnLastSelector: \".move-down-question\"\n    });\n\n    const autoLabelByPosition = new AutoLabelByPositionComponent({\n      listSelector: `${section.fieldSelector}:not(.hidden)`,\n      labelSelector: \".card-title span:first\",\n      onPositionComputed: (el, idx) => {\n        $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n      }\n    });\n\n    const createSortableList = () => {\n      createSortList(\".external-domains-list:not(.published)\", {\n        handle: \".external-domain-divider\",\n        placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n        forcePlaceholderSize: true,\n        onSortUpdate: () => {\n          autoLabelByPosition.run();\n          autoButtonsByPosition.run();\n        }\n      });\n    };\n\n    const hideDeletedItem = ($target) => {\n      const inputDeleted = $target.find(\"input[name$=\\\\[deleted\\\\]]\").val();\n\n      if (inputDeleted === \"true\") {\n        $target.addClass(\"hidden\");\n        $target.hide();\n\n        // Allows re-submitting of the form\n        $(\"input\", $target).removeAttr(\"required\");\n      }\n    };\n\n    createDynamicFields({\n      placeholderId: section.placeHolderId,\n      wrapperSelector: section.wrapperSelector,\n      containerSelector: `${section.wrapperSelector}-list`,\n      fieldSelector: section.fieldSelector,\n      addFieldButtonSelector: section.addFieldSelector,\n      removeFieldButtonSelector: `.remove-${fieldSelectorSuffix}`,\n      moveUpFieldButtonSelector: \".move-up-question\",\n      moveDownFieldButtonSelector: \".move-down-question\",\n      onAddField: () => {\n        createSortableList();\n\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n      },\n      onRemoveField: ($field) => {\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n\n        // Allows re-submitting of the form\n        $(\"input\", $field).removeAttr(\"required\");\n      },\n      onMoveUpField: () => {\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n      },\n      onMoveDownField: () => {\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n      }\n    });\n\n    createSortableList();\n\n    $(section.fieldSelector).each((_idx, el) => {\n      const $target = $(el);\n\n      hideDeletedItem($target);\n    });\n\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  });\n});\n"]},"metadata":{},"sourceType":"module"}