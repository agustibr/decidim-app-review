{"ast":null,"code":"$(function () {\n  var $projects = $(\"#projects, #project\");\n  var $budgetSummaryTotal = $(\".budget-summary__total\");\n  var $budgetExceedModal = $(\"#budget-excess\");\n  var $budgetSummary = $(\".budget-summary__progressbox\");\n  var $voteButton = $(\".budget-vote-button\");\n  var totalAllocation = parseInt($budgetSummaryTotal.attr(\"data-total-allocation\"), 10);\n\n  var cancelEvent = function cancelEvent(event) {\n    $(event.currentTarget).removeClass(\"loading-spinner\");\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  $voteButton.on(\"click\", \"span\", function () {\n    $(\".budget-list__action\").click();\n  });\n  $projects.on(\"click\", \".budget-list__action\", function (event) {\n    var currentAllocation = parseInt($budgetSummary.attr(\"data-current-allocation\"), 10);\n    var $currentTarget = $(event.currentTarget);\n    var projectAllocation = parseInt($currentTarget.attr(\"data-allocation\"), 10);\n\n    if (!$currentTarget.attr(\"data-open\")) {\n      $currentTarget.addClass(\"loading-spinner\");\n    }\n\n    if ($currentTarget.attr(\"disabled\")) {\n      cancelEvent(event);\n    } else if ($currentTarget.attr(\"data-add\") === \"true\" && currentAllocation + projectAllocation > totalAllocation) {\n      $budgetExceedModal.foundation(\"toggle\");\n      cancelEvent(event);\n    }\n  });\n});","map":{"version":3,"mappings":"AAAAA,CAAC,CAAC,YAAM;EACN,IAAMC,SAAS,GAAGD,CAAC,CAAC,qBAAD,CAAnB;EACA,IAAME,mBAAmB,GAAGF,CAAC,CAAC,wBAAD,CAA7B;EACA,IAAMG,kBAAkB,GAAGH,CAAC,CAAC,gBAAD,CAA5B;EACA,IAAMI,cAAc,GAAGJ,CAAC,CAAC,8BAAD,CAAxB;EACA,IAAMK,WAAW,GAAGL,CAAC,CAAC,qBAAD,CAArB;EACA,IAAMM,eAAe,GAAGC,QAAQ,CAACL,mBAAmB,CAACM,IAApBN,CAAyB,uBAAzBA,CAAD,EAAoD,EAApD,CAAhC;;EAEA,IAAMO,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAW;IAC7BV,CAAC,CAACU,KAAK,CAACC,aAAP,CAADX,CAAuBY,WAAvBZ,CAAmC,iBAAnCA;IACAU,KAAK,CAACG,eAANH;IACAA,KAAK,CAACI,cAANJ;EAHF;;EAMAL,WAAW,CAACU,EAAZV,CAAe,OAAfA,EAAwB,MAAxBA,EAAgC,YAAM;IACpCL,CAAC,CAAC,sBAAD,CAADA,CAA0BgB,KAA1BhB;EADF;EAIAC,SAAS,CAACc,EAAVd,CAAa,OAAbA,EAAsB,sBAAtBA,EAA8C,UAACS,KAAD,EAAW;IACvD,IAAMO,iBAAiB,GAAGV,QAAQ,CAACH,cAAc,CAACI,IAAfJ,CAAoB,yBAApBA,CAAD,EAAiD,EAAjD,CAAlC;IACA,IAAMc,cAAc,GAAGlB,CAAC,CAACU,KAAK,CAACC,aAAP,CAAxB;IACA,IAAMQ,iBAAiB,GAAGZ,QAAQ,CAACW,cAAc,CAACV,IAAfU,CAAoB,iBAApBA,CAAD,EAAyC,EAAzC,CAAlC;;IAEA,IAAI,CAACA,cAAc,CAACV,IAAfU,CAAoB,WAApBA,CAAL,EAAuC;MACrCA,cAAc,CAACE,QAAfF,CAAwB,iBAAxBA;IACD;;IAED,IAAIA,cAAc,CAACV,IAAfU,CAAoB,UAApBA,CAAJ,EAAqC;MACnCT,WAAW,CAACC,KAAD,CAAXD;IADF,OAEO,IAAKS,cAAc,CAACV,IAAfU,CAAoB,UAApBA,MAAoC,MAApCA,IAAiDD,iBAAiB,GAAGE,iBAApBF,GAAyCX,eAA/F,EAAiH;MACtHH,kBAAkB,CAACkB,UAAnBlB,CAA8B,QAA9BA;MACAM,WAAW,CAACC,KAAD,CAAXD;IACD;EAdH;AAlBD,EAADT","names":["$","$projects","$budgetSummaryTotal","$budgetExceedModal","$budgetSummary","$voteButton","totalAllocation","parseInt","attr","cancelEvent","event","currentTarget","removeClass","stopPropagation","preventDefault","on","click","currentAllocation","$currentTarget","projectAllocation","addClass","foundation"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-budgets/app/packs/src/decidim/budgets/projects.js"],"sourcesContent":["$(() => {\n  const $projects = $(\"#projects, #project\");\n  const $budgetSummaryTotal = $(\".budget-summary__total\");\n  const $budgetExceedModal = $(\"#budget-excess\");\n  const $budgetSummary = $(\".budget-summary__progressbox\");\n  const $voteButton = $(\".budget-vote-button\");\n  const totalAllocation = parseInt($budgetSummaryTotal.attr(\"data-total-allocation\"), 10);\n\n  const cancelEvent = (event) => {\n    $(event.currentTarget).removeClass(\"loading-spinner\");\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  $voteButton.on(\"click\", \"span\", () => {\n    $(\".budget-list__action\").click();\n  });\n\n  $projects.on(\"click\", \".budget-list__action\", (event) => {\n    const currentAllocation = parseInt($budgetSummary.attr(\"data-current-allocation\"), 10);\n    const $currentTarget = $(event.currentTarget);\n    const projectAllocation = parseInt($currentTarget.attr(\"data-allocation\"), 10);\n\n    if (!$currentTarget.attr(\"data-open\")) {\n      $currentTarget.addClass(\"loading-spinner\");\n    }\n\n    if ($currentTarget.attr(\"disabled\")) {\n      cancelEvent(event);\n    } else if (($currentTarget.attr(\"data-add\") === \"true\") && ((currentAllocation + projectAllocation) > totalAllocation)) {\n      $budgetExceedModal.foundation(\"toggle\");\n      cancelEvent(event);\n    }\n  });\n});\n"]},"metadata":{},"sourceType":"module"}