{"ast":null,"code":"import AutoButtonsByPositionComponent from \"src/decidim/admin/auto_buttons_by_position.component\";\nimport AutoLabelByPositionComponent from \"src/decidim/admin/auto_label_by_position.component\";\nimport createSortList from \"src/decidim/admin/sort_list.component\";\nimport createDynamicFields from \"src/decidim/admin/dynamic_fields.component\";\nimport createQuillEditor from \"src/decidim/editor\";\nvar wrapperSelector = \".meeting-agenda-items\";\nvar fieldSelector = \".meeting-agenda-item\";\nvar childsWrapperSelector = \".meeting-agenda-item-childs\";\nvar childFieldSelector = \".meeting-agenda-item-child\";\nvar autoLabelByPosition = new AutoLabelByPositionComponent({\n  listSelector: \".meeting-agenda-item:not(.hidden)\",\n  labelSelector: \".card-title span:first\",\n  onPositionComputed: function onPositionComputed(el, idx) {\n    $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n  }\n});\nvar autoButtonsByPosition = new AutoButtonsByPositionComponent({\n  listSelector: \".meeting-agenda-item:not(.hidden)\",\n  hideOnFirstSelector: \".move-up-agenda-item\",\n  hideOnLastSelector: \".move-down-agenda-item\"\n});\n\nvar createSortableList = function createSortableList() {\n  createSortList(\".meeting-agenda-items-list:not(.published)\", {\n    handle: \".agenda-item-divider\",\n    placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n    forcePlaceholderSize: true,\n    onSortUpdate: function onSortUpdate() {\n      autoLabelByPosition.run();\n    }\n  });\n};\n\nvar createSortableListChild = function createSortableListChild() {\n  createSortList(\".meeting-agenda-item-childs-list:not(.published)\", {\n    handle: \".agenda-item-child-divider\",\n    placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n    forcePlaceholderSize: true,\n    onSortUpdate: function onSortUpdate() {\n      autoLabelByPosition.run();\n    }\n  });\n};\n\nvar autoLabelByPositionChild = new AutoLabelByPositionComponent({\n  listSelector: \".meeting-agenda-item-child:not(.hidden)\",\n  labelSelector: \".card-title span:first\",\n  onPositionComputed: function onPositionComputed(el, idx) {\n    $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n  }\n});\nvar autoButtonsByPositionChild = new AutoButtonsByPositionComponent({\n  listSelector: \".meeting-agenda-item-child:not(.hidden)\",\n  hideOnFirstSelector: \".move-up-agenda-item-child\",\n  hideOnLastSelector: \".move-down-agenda-item-child\"\n});\n\nvar createDynamicFieldsForAgendaItemChilds = function createDynamicFieldsForAgendaItemChilds(fieldId) {\n  return createDynamicFields({\n    placeholderId: \"meeting-agenda-item-child-id\",\n    wrapperSelector: \"#\".concat(fieldId, \" \").concat(childsWrapperSelector),\n    containerSelector: \".meeting-agenda-item-childs-list\",\n    fieldSelector: childFieldSelector,\n    addFieldButtonSelector: \".add-agenda-item-child\",\n    removeFieldButtonSelector: \".remove-agenda-item-child\",\n    moveUpFieldButtonSelector: \".move-up-agenda-item-child\",\n    moveDownFieldButtonSelector: \".move-down-agenda-item-child\",\n    onAddField: function onAddField($field) {\n      createSortableListChild();\n      $field.find(\".editor-container\").each(function (idx, el) {\n        createQuillEditor(el);\n      });\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onRemoveField: function onRemoveField() {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onMoveUpField: function onMoveUpField() {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onMoveDownField: function onMoveDownField() {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    }\n  });\n};\n\nvar dynamicFieldsForAgendaItemChilds = {};\n\nvar setupInitialAgendaItemChildAttributes = function setupInitialAgendaItemChildAttributes($target) {\n  var fieldId = $target.attr(\"id\");\n  dynamicFieldsForAgendaItemChilds[fieldId] = createDynamicFieldsForAgendaItemChilds(fieldId);\n};\n\nvar hideDeletedAgendaItem = function hideDeletedAgendaItem($target) {\n  var inputDeleted = $target.find(\"input[name$=\\\\[deleted\\\\]]\").val();\n\n  if (inputDeleted === \"true\") {\n    $target.addClass(\"hidden\");\n    $target.hide();\n  }\n};\n\ncreateDynamicFields({\n  placeholderId: \"meeting-agenda-item-id\",\n  wrapperSelector: wrapperSelector,\n  containerSelector: \".meeting-agenda-items-list\",\n  fieldSelector: fieldSelector,\n  addFieldButtonSelector: \".add-agenda-item\",\n  removeFieldButtonSelector: \".remove-agenda-item\",\n  moveUpFieldButtonSelector: \".move-up-agenda-item\",\n  moveDownFieldButtonSelector: \".move-down-agenda-item\",\n  onAddField: function onAddField($field) {\n    // createDynamicFieldsForAgendaItemChilds($field);\n    setupInitialAgendaItemChildAttributes($field);\n    createSortableList();\n    $field.find(\".editor-container\").each(function (idx, el) {\n      createQuillEditor(el);\n    });\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onRemoveField: function onRemoveField() {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onMoveUpField: function onMoveUpField() {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onMoveDownField: function onMoveDownField() {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  }\n});\ncreateSortableList();\n$(fieldSelector).each(function (idx, el) {\n  var $target = $(el);\n  hideDeletedAgendaItem($target);\n  setupInitialAgendaItemChildAttributes($target);\n});\nautoLabelByPosition.run();\nautoButtonsByPosition.run();\nautoLabelByPositionChild.run();\nautoButtonsByPositionChild.run();","map":{"version":3,"mappings":"AAAA,OAAOA,8BAAP,MAA2C,sDAA3C;AACA,OAAOC,4BAAP,MAAyC,oDAAzC;AACA,OAAOC,cAAP,MAA2B,uCAA3B;AACA,OAAOC,mBAAP,MAAgC,4CAAhC;AACA,OAAOC,iBAAP,MAA8B,oBAA9B;AAEA,IAAMC,eAAe,GAAG,uBAAxB;AACA,IAAMC,aAAa,GAAG,sBAAtB;AACA,IAAMC,qBAAqB,GAAG,6BAA9B;AACA,IAAMC,kBAAkB,GAAG,4BAA3B;AAEA,IAAMC,mBAAmB,GAAG,IAAIR,4BAAJ,CAAiC;EAC3DS,YAAY,EAAE,mCAD6C;EAE3DC,aAAa,EAAE,wBAF4C;EAG3DC,kBAAkB,EAAE,4BAACC,EAAD,EAAKC,GAAL,EAAa;IAC/BC,CAAC,CAACF,EAAD,CAADE,CAAMC,IAAND,CAAW,6BAAXA,EAA0CE,GAA1CF,CAA8CD,GAA9CC;EACD;AAL0D,CAAjC,CAA5B;AAQA,IAAMG,qBAAqB,GAAG,IAAIlB,8BAAJ,CAAmC;EAC/DU,YAAY,EAAE,mCADiD;EAE/DS,mBAAmB,EAAE,sBAF0C;EAG/DC,kBAAkB,EAAE;AAH2C,CAAnC,CAA9B;;AAMA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;EAC/BnB,cAAc,CAAC,4CAAD,EAA+C;IAC3DoB,MAAM,EAAE,sBADmD;IAE3DC,WAAW,EAAE,8DAF8C;IAG3DC,oBAAoB,EAAE,IAHqC;IAI3DC,YAAY,EAAE,wBAAM;MAAEhB,mBAAmB,CAACiB,GAApBjB;IAA2B;EAJU,CAA/C,CAAdP;AADF;;AASA,IAAMyB,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;EACpCzB,cAAc,CAAC,kDAAD,EAAqD;IACjEoB,MAAM,EAAE,4BADyD;IAEjEC,WAAW,EAAE,8DAFoD;IAGjEC,oBAAoB,EAAE,IAH2C;IAIjEC,YAAY,EAAE,wBAAM;MAAEhB,mBAAmB,CAACiB,GAApBjB;IAA2B;EAJgB,CAArD,CAAdP;AADF;;AASA,IAAM0B,wBAAwB,GAAG,IAAI3B,4BAAJ,CAAiC;EAChES,YAAY,EAAE,yCADkD;EAEhEC,aAAa,EAAE,wBAFiD;EAGhEC,kBAAkB,EAAE,4BAACC,EAAD,EAAKC,GAAL,EAAa;IAC/BC,CAAC,CAACF,EAAD,CAADE,CAAMC,IAAND,CAAW,6BAAXA,EAA0CE,GAA1CF,CAA8CD,GAA9CC;EACD;AAL+D,CAAjC,CAAjC;AAQA,IAAMc,0BAA0B,GAAG,IAAI7B,8BAAJ,CAAmC;EACpEU,YAAY,EAAE,yCADsD;EAEpES,mBAAmB,EAAE,4BAF+C;EAGpEC,kBAAkB,EAAE;AAHgD,CAAnC,CAAnC;;AAMA,IAAMU,sCAAsC,GAAG,SAAzCA,sCAAyC,CAACC,OAAD,EAAa;EAC1D,OAAO5B,mBAAmB,CAAC;IACzB6B,aAAa,EAAE,8BADU;IAEzB3B,eAAe,aAAM0B,OAAN,cAAiBxB,qBAAjB,CAFU;IAGzB0B,iBAAiB,EAAE,kCAHM;IAIzB3B,aAAa,EAAEE,kBAJU;IAKzB0B,sBAAsB,EAAE,wBALC;IAMzBC,yBAAyB,EAAE,2BANF;IAOzBC,yBAAyB,EAAE,4BAPF;IAQzBC,2BAA2B,EAAE,8BARJ;IAUzBC,UAAU,EAAE,oBAACC,MAAD,EAAY;MACtBZ,uBAAuB;MAEvBY,MAAM,CAACvB,IAAPuB,CAAY,mBAAZA,EAAiCC,IAAjCD,CAAsC,UAACzB,GAAD,EAAMD,EAAN,EAAa;QACjDT,iBAAiB,CAACS,EAAD,CAAjBT;MADF;MAIAwB,wBAAwB,CAACF,GAAzBE;MACAC,0BAA0B,CAACH,GAA3BG;IAlBuB;IAoBzBY,aAAa,EAAE,yBAAM;MACnBb,wBAAwB,CAACF,GAAzBE;MACAC,0BAA0B,CAACH,GAA3BG;IAtBuB;IAwBzBa,aAAa,EAAE,yBAAM;MACnBd,wBAAwB,CAACF,GAAzBE;MACAC,0BAA0B,CAACH,GAA3BG;IA1BuB;IA4BzBc,eAAe,EAAE,2BAAM;MACrBf,wBAAwB,CAACF,GAAzBE;MACAC,0BAA0B,CAACH,GAA3BG;IACD;EA/BwB,CAAD,CAA1B;AADF;;AAoCA,IAAMe,gCAAgC,GAAG,EAAzC;;AAEA,IAAMC,qCAAqC,GAAG,SAAxCA,qCAAwC,CAACC,OAAD,EAAa;EACzD,IAAMf,OAAO,GAAGe,OAAO,CAACC,IAARD,CAAa,IAAbA,CAAhB;EAEAF,gCAAgC,CAACb,OAAD,CAAhCa,GAA4Cd,sCAAsC,CAACC,OAAD,CAAlFa;AAHF;;AAOA,IAAMI,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACF,OAAD,EAAa;EACzC,IAAMG,YAAY,GAAGH,OAAO,CAAC9B,IAAR8B,CAAa,4BAAbA,EAA2C7B,GAA3C6B,EAArB;;EAEA,IAAIG,YAAY,KAAK,MAArB,EAA6B;IAC3BH,OAAO,CAACI,QAARJ,CAAiB,QAAjBA;IACAA,OAAO,CAACK,IAARL;EACD;AANH;;AASA3C,mBAAmB,CAAC;EAClB6B,aAAa,EAAE,wBADG;EAElB3B,eAAe,EAAEA,eAFC;EAGlB4B,iBAAiB,EAAE,4BAHD;EAIlB3B,aAAa,EAAEA,aAJG;EAKlB4B,sBAAsB,EAAE,kBALN;EAMlBC,yBAAyB,EAAE,qBANT;EAOlBC,yBAAyB,EAAE,sBAPT;EAQlBC,2BAA2B,EAAE,wBARX;EASlBC,UAAU,EAAE,oBAACC,MAAD,EAAY;IACtB;IACAM,qCAAqC,CAACN,MAAD,CAArCM;IACAxB,kBAAkB;IAElBkB,MAAM,CAACvB,IAAPuB,CAAY,mBAAZA,EAAiCC,IAAjCD,CAAsC,UAACzB,GAAD,EAAMD,EAAN,EAAa;MACjDT,iBAAiB,CAACS,EAAD,CAAjBT;IADF;IAIAK,mBAAmB,CAACiB,GAApBjB;IACAS,qBAAqB,CAACQ,GAAtBR;EAnBgB;EAqBlBuB,aAAa,EAAE,yBAAM;IACnBhC,mBAAmB,CAACiB,GAApBjB;IACAS,qBAAqB,CAACQ,GAAtBR;EAvBgB;EAyBlBwB,aAAa,EAAE,yBAAM;IACnBjC,mBAAmB,CAACiB,GAApBjB;IACAS,qBAAqB,CAACQ,GAAtBR;EA3BgB;EA6BlByB,eAAe,EAAE,2BAAM;IACrBlC,mBAAmB,CAACiB,GAApBjB;IACAS,qBAAqB,CAACQ,GAAtBR;EACD;AAhCiB,CAAD,CAAnBf;AAmCAkB,kBAAkB;AAElBN,CAAC,CAACT,aAAD,CAADS,CAAiByB,IAAjBzB,CAAsB,UAACD,GAAD,EAAMD,EAAN,EAAa;EACjC,IAAMiC,OAAO,GAAG/B,CAAC,CAACF,EAAD,CAAjB;EAEAmC,qBAAqB,CAACF,OAAD,CAArBE;EACAH,qCAAqC,CAACC,OAAD,CAArCD;AAJF;AAOApC,mBAAmB,CAACiB,GAApBjB;AACAS,qBAAqB,CAACQ,GAAtBR;AACAU,wBAAwB,CAACF,GAAzBE;AACAC,0BAA0B,CAACH,GAA3BG","names":["AutoButtonsByPositionComponent","AutoLabelByPositionComponent","createSortList","createDynamicFields","createQuillEditor","wrapperSelector","fieldSelector","childsWrapperSelector","childFieldSelector","autoLabelByPosition","listSelector","labelSelector","onPositionComputed","el","idx","$","find","val","autoButtonsByPosition","hideOnFirstSelector","hideOnLastSelector","createSortableList","handle","placeholder","forcePlaceholderSize","onSortUpdate","run","createSortableListChild","autoLabelByPositionChild","autoButtonsByPositionChild","createDynamicFieldsForAgendaItemChilds","fieldId","placeholderId","containerSelector","addFieldButtonSelector","removeFieldButtonSelector","moveUpFieldButtonSelector","moveDownFieldButtonSelector","onAddField","$field","each","onRemoveField","onMoveUpField","onMoveDownField","dynamicFieldsForAgendaItemChilds","setupInitialAgendaItemChildAttributes","$target","attr","hideDeletedAgendaItem","inputDeleted","addClass","hide"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-meetings/app/packs/src/decidim/meetings/admin/agendas.js"],"sourcesContent":["import AutoButtonsByPositionComponent from \"src/decidim/admin/auto_buttons_by_position.component\"\nimport AutoLabelByPositionComponent from \"src/decidim/admin/auto_label_by_position.component\"\nimport createSortList from \"src/decidim/admin/sort_list.component\"\nimport createDynamicFields from \"src/decidim/admin/dynamic_fields.component\"\nimport createQuillEditor from \"src/decidim/editor\"\n\nconst wrapperSelector = \".meeting-agenda-items\";\nconst fieldSelector = \".meeting-agenda-item\";\nconst childsWrapperSelector = \".meeting-agenda-item-childs\";\nconst childFieldSelector = \".meeting-agenda-item-child\";\n\nconst autoLabelByPosition = new AutoLabelByPositionComponent({\n  listSelector: \".meeting-agenda-item:not(.hidden)\",\n  labelSelector: \".card-title span:first\",\n  onPositionComputed: (el, idx) => {\n    $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n  }\n});\n\nconst autoButtonsByPosition = new AutoButtonsByPositionComponent({\n  listSelector: \".meeting-agenda-item:not(.hidden)\",\n  hideOnFirstSelector: \".move-up-agenda-item\",\n  hideOnLastSelector: \".move-down-agenda-item\"\n});\n\nconst createSortableList = () => {\n  createSortList(\".meeting-agenda-items-list:not(.published)\", {\n    handle: \".agenda-item-divider\",\n    placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n    forcePlaceholderSize: true,\n    onSortUpdate: () => { autoLabelByPosition.run() }\n  });\n};\n\nconst createSortableListChild = () => {\n  createSortList(\".meeting-agenda-item-childs-list:not(.published)\", {\n    handle: \".agenda-item-child-divider\",\n    placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n    forcePlaceholderSize: true,\n    onSortUpdate: () => { autoLabelByPosition.run() }\n  });\n};\n\nconst autoLabelByPositionChild = new AutoLabelByPositionComponent({\n  listSelector: \".meeting-agenda-item-child:not(.hidden)\",\n  labelSelector: \".card-title span:first\",\n  onPositionComputed: (el, idx) => {\n    $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n  }\n});\n\nconst autoButtonsByPositionChild = new AutoButtonsByPositionComponent({\n  listSelector: \".meeting-agenda-item-child:not(.hidden)\",\n  hideOnFirstSelector: \".move-up-agenda-item-child\",\n  hideOnLastSelector: \".move-down-agenda-item-child\"\n});\n\nconst createDynamicFieldsForAgendaItemChilds = (fieldId) => {\n  return createDynamicFields({\n    placeholderId: \"meeting-agenda-item-child-id\",\n    wrapperSelector: `#${fieldId} ${childsWrapperSelector}`,\n    containerSelector: \".meeting-agenda-item-childs-list\",\n    fieldSelector: childFieldSelector,\n    addFieldButtonSelector: \".add-agenda-item-child\",\n    removeFieldButtonSelector: \".remove-agenda-item-child\",\n    moveUpFieldButtonSelector: \".move-up-agenda-item-child\",\n    moveDownFieldButtonSelector: \".move-down-agenda-item-child\",\n\n    onAddField: ($field) => {\n      createSortableListChild();\n\n      $field.find(\".editor-container\").each((idx, el) => {\n        createQuillEditor(el);\n      });\n\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onRemoveField: () => {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onMoveUpField: () => {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onMoveDownField: () => {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    }\n  });\n};\n\nconst dynamicFieldsForAgendaItemChilds = {};\n\nconst setupInitialAgendaItemChildAttributes = ($target) => {\n  const fieldId = $target.attr(\"id\");\n\n  dynamicFieldsForAgendaItemChilds[fieldId] = createDynamicFieldsForAgendaItemChilds(fieldId);\n\n}\n\nconst hideDeletedAgendaItem = ($target) => {\n  const inputDeleted = $target.find(\"input[name$=\\\\[deleted\\\\]]\").val();\n\n  if (inputDeleted === \"true\") {\n    $target.addClass(\"hidden\");\n    $target.hide();\n  }\n};\n\ncreateDynamicFields({\n  placeholderId: \"meeting-agenda-item-id\",\n  wrapperSelector: wrapperSelector,\n  containerSelector: \".meeting-agenda-items-list\",\n  fieldSelector: fieldSelector,\n  addFieldButtonSelector: \".add-agenda-item\",\n  removeFieldButtonSelector: \".remove-agenda-item\",\n  moveUpFieldButtonSelector: \".move-up-agenda-item\",\n  moveDownFieldButtonSelector: \".move-down-agenda-item\",\n  onAddField: ($field) => {\n    // createDynamicFieldsForAgendaItemChilds($field);\n    setupInitialAgendaItemChildAttributes($field);\n    createSortableList();\n\n    $field.find(\".editor-container\").each((idx, el) => {\n      createQuillEditor(el);\n    });\n\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onRemoveField: () => {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onMoveUpField: () => {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onMoveDownField: () => {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  }\n});\n\ncreateSortableList();\n\n$(fieldSelector).each((idx, el) => {\n  const $target = $(el);\n\n  hideDeletedAgendaItem($target);\n  setupInitialAgendaItemChildAttributes($target);\n});\n\nautoLabelByPosition.run();\nautoButtonsByPosition.run();\nautoLabelByPositionChild.run();\nautoButtonsByPositionChild.run();\n"]},"metadata":{},"sourceType":"module"}