{"ast":null,"code":"import { datalistSelect } from \"src/decidim/datalist_select\";\n$(function () {\n  var wrapper = document.querySelector(\"#choose-template\");\n\n  if (!wrapper) {\n    return;\n  }\n\n  var preview = function preview(id) {\n    var options = wrapper.dataset;\n    var previewURL = options.previewurl;\n\n    if (!previewURL) {\n      return;\n    }\n\n    var params = new URLSearchParams({\n      id: id\n    });\n    fetch(\"\".concat(previewURL, \"?\").concat(params.toString()), {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (response) {\n      return response.text();\n    }).then(function (data) {\n      var script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.innerHTML = data;\n      document.getElementsByTagName(\"head\")[0].appendChild(script);\n    })[\"catch\"](function (error) {\n      console.error(error); // eslint-disable-line no-console\n    });\n  };\n\n  datalistSelect(wrapper, preview);\n});","map":{"version":3,"mappings":"AAAA,SAASA,cAAT,QAA+B,6BAA/B;AAEAC,CAAC,CAAC,YAAM;EACN,IAAMC,OAAO,GAAGC,QAAQ,CAACC,aAATD,CAAuB,kBAAvBA,CAAhB;;EACA,IAAI,CAACD,OAAL,EAAc;IACZ;EACD;;EAED,IAAMG,OAAO,GAAG,SAAVA,OAAU,CAACC,EAAD,EAAQ;IACtB,IAAMC,OAAO,GAAGL,OAAO,CAACM,OAAxB;IACA,IAAMC,UAAU,GAAGF,OAAO,CAACG,UAA3B;;IACA,IAAI,CAACD,UAAL,EAAiB;MACf;IACD;;IACD,IAAME,MAAM,GAAG,IAAIC,eAAJ,CAAoB;MAAEN,EAAE,EAAEA;IAAN,CAApB,CAAf;IACAO,KAAK,WAAIJ,UAAJ,cAAkBE,MAAM,CAACG,QAAPH,EAAlB,GAAuC;MAC1CI,MAAM,EAAE,KADkC;MAE1CC,OAAO,EAAE;QAAE,gBAAgB;MAAlB;IAFiC,CAAvC,CAALH,CAGGI,IAHHJ,CAGQ,UAACK,QAAD;MAAA,OAAcA,QAAQ,CAACC,IAATD,EAAd;IAHR,GAGuCD,IAHvCJ,CAG4C,UAACO,IAAD,EAAU;MACpD,IAAMC,MAAM,GAAGlB,QAAQ,CAACmB,aAATnB,CAAuB,QAAvBA,CAAf;MACAkB,MAAM,CAACE,IAAPF,GAAc,iBAAdA;MACAA,MAAM,CAACG,SAAPH,GAAmBD,IAAnBC;MACAlB,QAAQ,CAACsB,oBAATtB,CAA8B,MAA9BA,EAAsC,CAAtCA,EAAyCuB,WAAzCvB,CAAqDkB,MAArDlB;IAPF,YAQS,UAACwB,KAAD,EAAW;MAClBC,OAAO,CAACD,KAARC,CAAcD,KAAdC,EADkB,CACI;IATxB;EAPF;;EAoBA5B,cAAc,CAACE,OAAD,EAAUG,OAAV,CAAdL;AA1BD,EAADC","names":["datalistSelect","$","wrapper","document","querySelector","preview","id","options","dataset","previewURL","previewurl","params","URLSearchParams","fetch","toString","method","headers","then","response","text","data","script","createElement","type","innerHTML","getElementsByTagName","appendChild","error","console"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-templates/app/packs/src/decidim/templates/admin/choose_template.js"],"sourcesContent":["import { datalistSelect } from \"src/decidim/datalist_select\";\n\n$(() => {\n  const wrapper = document.querySelector(\"#choose-template\");\n  if (!wrapper) {\n    return;\n  }\n\n  const preview = (id) => {\n    const options = wrapper.dataset;\n    const previewURL = options.previewurl;\n    if (!previewURL) {\n      return;\n    }\n    const params = new URLSearchParams({ id: id });\n    fetch(`${previewURL}?${params.toString()}`, {\n      method: \"GET\",\n      headers: { \"Content-Type\": \"application/json\" }\n    }).then((response) => response.text()).then((data) => {\n      const script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.innerHTML = data;\n      document.getElementsByTagName(\"head\")[0].appendChild(script);\n    }).catch((error) => {\n      console.error(error); // eslint-disable-line no-console\n    });\n  }\n\n  datalistSelect(wrapper, preview)\n})\n"]},"metadata":{},"sourceType":"module"}