{"ast":null,"code":"import \"src/decidim/admin/scope_picker_enabler.component\";\nimport \"src/decidim/admin/proposal_infinite_edit\";\nimport BudgetRuleTogglerComponent from \"src/decidim/admin/budget_rule_toggler.component\"; // Checks if the form contains fields with special CSS classes added in\n// Decidim::Admin::SettingsHelper and acts accordingly.\n\n$(function () {\n  var budgetRuleToggler = new BudgetRuleTogglerComponent({\n    ruleCheckboxes: $(\"input[id^='component_settings_vote_rule_']\")\n  });\n  budgetRuleToggler.run(); // Prevents readonly containers from being modified.\n\n  var $readonlyContainer = $(\".readonly_container input\");\n  $readonlyContainer.click(function (event) {\n    event.preventDefault();\n    return false;\n  }); // Target fields:\n  // - amendments_wizard_help_text\n  // - amendments_visibility\n  // - amendment_creation_enabled\n  // - amendment_reaction_enabled\n  // - amendment_promotion_enabled\n  // (1) Hides target fields if amendments_enabled component setting is NOT checked.\n  // (2) Toggles visibilty of target fields when amendments_enabled component setting is clicked.\n\n  var $amendmentsEnabled = $(\"input#component_settings_amendments_enabled\");\n\n  if ($amendmentsEnabled.length > 0) {\n    var $amendmentStepSettings = $(\".amendments_wizard_help_text_container, .amendments_visibility_container, .amendment_creation_enabled_container, .amendment_reaction_enabled_container, .amendment_promotion_enabled_container\");\n\n    if ($amendmentsEnabled.is(\":not(:checked)\")) {\n      $amendmentStepSettings.hide();\n    }\n\n    $amendmentsEnabled.click(function () {\n      $amendmentStepSettings.toggle();\n    });\n  }\n});","map":{"version":3,"mappings":"AAAA,OAAO,kDAAP;AACA,OAAO,0CAAP;AAEA,OAAOA,0BAAP,MAAuC,iDAAvC,C,CAEA;AACA;;AACAC,CAAC,CAAC,YAAM;EACN,IAAMC,iBAAiB,GAAG,IAAIF,0BAAJ,CAA+B;IACvDG,cAAc,EAAEF,CAAC,CAAC,4CAAD;EADsC,CAA/B,CAA1B;EAIAC,iBAAiB,CAACE,GAAlBF,GALM,CAON;;EACA,IAAMG,kBAAkB,GAAGJ,CAAC,CAAC,2BAAD,CAA5B;EAEAI,kBAAkB,CAACC,KAAnBD,CAAyB,UAACE,KAAD,EAAW;IAClCA,KAAK,CAACC,cAAND;IACA,OAAO,KAAP;EAFF,GAVM,CAeN;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;;EACA,IAAME,kBAAkB,GAAGR,CAAC,CAAC,6CAAD,CAA5B;;EAEA,IAAIQ,kBAAkB,CAACC,MAAnBD,GAA4B,CAAhC,EAAmC;IACjC,IAAME,sBAAsB,GAAGV,CAAC,CAAC,gMAAD,CAAhC;;IAEA,IAAIQ,kBAAkB,CAACG,EAAnBH,CAAsB,gBAAtBA,CAAJ,EAA6C;MAC3CE,sBAAsB,CAACE,IAAvBF;IACD;;IAEDF,kBAAkB,CAACH,KAAnBG,CAAyB,YAAM;MAC7BE,sBAAsB,CAACG,MAAvBH;IADF;EAGD;AApCF,EAADV","names":["BudgetRuleTogglerComponent","$","budgetRuleToggler","ruleCheckboxes","run","$readonlyContainer","click","event","preventDefault","$amendmentsEnabled","length","$amendmentStepSettings","is","hide","toggle"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-admin/app/packs/src/decidim/admin/form.js"],"sourcesContent":["import \"src/decidim/admin/scope_picker_enabler.component\"\nimport \"src/decidim/admin/proposal_infinite_edit\"\n\nimport BudgetRuleTogglerComponent from \"src/decidim/admin/budget_rule_toggler.component\"\n\n// Checks if the form contains fields with special CSS classes added in\n// Decidim::Admin::SettingsHelper and acts accordingly.\n$(() => {\n  const budgetRuleToggler = new BudgetRuleTogglerComponent({\n    ruleCheckboxes: $(\"input[id^='component_settings_vote_rule_']\")\n  });\n\n  budgetRuleToggler.run();\n\n  // Prevents readonly containers from being modified.\n  const $readonlyContainer = $(\".readonly_container input\");\n\n  $readonlyContainer.click((event) => {\n    event.preventDefault();\n    return false;\n  });\n\n  // Target fields:\n  // - amendments_wizard_help_text\n  // - amendments_visibility\n  // - amendment_creation_enabled\n  // - amendment_reaction_enabled\n  // - amendment_promotion_enabled\n\n  // (1) Hides target fields if amendments_enabled component setting is NOT checked.\n  // (2) Toggles visibilty of target fields when amendments_enabled component setting is clicked.\n  const $amendmentsEnabled = $(\"input#component_settings_amendments_enabled\");\n\n  if ($amendmentsEnabled.length > 0) {\n    const $amendmentStepSettings = $(\".amendments_wizard_help_text_container, .amendments_visibility_container, .amendment_creation_enabled_container, .amendment_reaction_enabled_container, .amendment_promotion_enabled_container\");\n\n    if ($amendmentsEnabled.is(\":not(:checked)\")) {\n      $amendmentStepSettings.hide();\n    }\n\n    $amendmentsEnabled.click(() => {\n      $amendmentStepSettings.toggle();\n    });\n  }\n});\n"]},"metadata":{},"sourceType":"module"}