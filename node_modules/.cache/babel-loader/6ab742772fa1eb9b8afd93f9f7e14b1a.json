{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nimport icon from \"src/decidim/icon\";\nvar EXCLUDE_CLASSES = [\"card--list__data__icon\", \"footer-social__icon\", \"logo-cityhall\"];\nvar EXCLUDE_ANCESTOR_CLASSES = [\"editor-container\"];\nvar EXCLUDE_REL = [\"license\", \"decidim\"];\nvar DEFAULT_MESSAGES = {\n  externalLink: \"External link\"\n};\nvar MESSAGES = DEFAULT_MESSAGES;\n\nvar ExternalLink = /*#__PURE__*/function () {\n  function ExternalLink(link) {\n    _classCallCheck(this, ExternalLink);\n\n    this.$link = link;\n    this.setup();\n  }\n\n  _createClass(ExternalLink, [{\n    key: \"setup\",\n    value: function setup() {\n      var _this = this;\n\n      if (EXCLUDE_CLASSES.some(function (cls) {\n        return _this.$link.hasClass(cls);\n      })) {\n        return;\n      }\n\n      if (EXCLUDE_ANCESTOR_CLASSES.some(function (cls) {\n        return _this.$link.parents().hasClass(cls);\n      })) {\n        return;\n      }\n\n      if (EXCLUDE_REL.some(function (rel) {\n        var linkRels = \"\".concat(_this.$link.attr(\"rel\")).split(\" \");\n        return linkRels.indexOf(rel) > -1;\n      })) {\n        return;\n      }\n\n      this.$link.addClass(\"external-link-container\");\n      var spacer = \"&nbsp;\";\n\n      if (this.$link.text().trim().length < 1) {\n        // Fixes image links extra space\n        spacer = \"\";\n      }\n\n      this.$link.append(\"\".concat(spacer).concat(this.generateElement()));\n    }\n  }, {\n    key: \"generateElement\",\n    value: function generateElement() {\n      var content = \"\".concat(this.generateIcon()).concat(this.generateScreenReaderLabel());\n      return \"<span class=\\\"external-link-indicator\\\">\".concat(content, \"</span>\");\n    }\n  }, {\n    key: \"generateIcon\",\n    value: function generateIcon() {\n      return icon(\"external-link\");\n    }\n  }, {\n    key: \"generateScreenReaderLabel\",\n    value: function generateScreenReaderLabel() {\n      return \"<span class=\\\"show-for-sr\\\">(\".concat(MESSAGES.externalLink, \")</span>\");\n    }\n  }], [{\n    key: \"configureMessages\",\n    value: function configureMessages(messages) {\n      MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n    }\n  }]);\n\n  return ExternalLink;\n}();\n\nexport { ExternalLink as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,IAAP,MAAiB,kBAAjB;AAEA,IAAMC,eAAe,GAAG,CACtB,wBADsB,EAEtB,qBAFsB,EAGtB,eAHsB,CAAxB;AAKA,IAAMC,wBAAwB,GAAG,CAC/B,kBAD+B,CAAjC;AAGA,IAAMC,WAAW,GAAG,CAAC,SAAD,EAAY,SAAZ,CAApB;AAEA,IAAMC,gBAAgB,GAAG;EACvBC,YAAY,EAAE;AADS,CAAzB;AAGA,IAAIC,QAAQ,GAAGF,gBAAf;;IAEqBG,Y;EAKnB,sBAAYC,IAAZ,EAAkB;IAAAC;;IAChB,KAAKC,KAAL,GAAaF,IAAb;IAEA,KAAKG,KAAL;EACD;;;;WAED,iBAAQ;MAAA;;MACN,IAAIV,eAAe,CAACW,IAAhBX,CAAqB,UAACY,GAAD;QAAA,OAASC,KAAI,CAACJ,KAAL,CAAWK,QAAX,CAAoBF,GAApB,CAAT;MAArB,EAAJ,EAA6D;QAC3D;MACD;;MACD,IAAIX,wBAAwB,CAACU,IAAzBV,CAA8B,UAACW,GAAD;QAAA,OAASC,KAAI,CAACJ,KAAL,CAAWM,OAAX,GAAqBD,QAArB,CAA8BF,GAA9B,CAAT;MAA9B,EAAJ,EAAgF;QAC9E;MACD;;MACD,IACEV,WAAW,CAACS,IAAZT,CAAiB,UAACc,GAAD,EAAS;QACxB,IAAMC,QAAQ,GAAG,UAAGJ,KAAI,CAACJ,KAAL,CAAWS,IAAX,CAAgB,KAAhB,CAAH,EAA4BC,KAA5B,CAAkC,GAAlC,CAAjB;QACA,OAAOF,QAAQ,CAACG,OAATH,CAAiBD,GAAjBC,IAAwB,CAAC,CAAhC;MAFF,EADF,EAKE;QACA;MACD;;MAED,KAAKR,KAAL,CAAWY,QAAX,CAAoB,yBAApB;MACA,IAAIC,MAAM,GAAG,QAAb;;MACA,IAAI,KAAKb,KAAL,CAAWc,IAAX,GAAkBC,IAAlB,GAAyBC,MAAzB,GAAkC,CAAtC,EAAyC;QACvC;QACAH,MAAM,GAAG,EAATA;MACD;;MACD,KAAKb,KAAL,CAAWiB,MAAX,WAAqBJ,MAArB,SAA8B,KAAKK,eAAL,EAA9B;IACD;;;WAED,2BAAkB;MAChB,IAAIC,OAAO,aAAM,KAAKC,YAAL,EAAN,SAA4B,KAAKC,yBAAL,EAA5B,CAAX;MAEA,yDAAgDF,OAAhD;IACD;;;WAED,wBAAe;MACb,OAAO7B,IAAI,CAAC,eAAD,CAAX;IACD;;;WAED,qCAA4B;MAC1B,8CAAqCM,QAAQ,CAACD,YAA9C;IACD;;;WA/CD,2BAAyB2B,QAAzB,EAAmC;MACjC1B,QAAQ,GAAG2B,CAAC,CAACC,MAAFD,CAAS7B,gBAAT6B,EAA2BD,QAA3BC,CAAX3B;IACD;;;;;;SAHkBC,Y","names":["icon","EXCLUDE_CLASSES","EXCLUDE_ANCESTOR_CLASSES","EXCLUDE_REL","DEFAULT_MESSAGES","externalLink","MESSAGES","ExternalLink","link","_classCallCheck","$link","setup","some","cls","_this","hasClass","parents","rel","linkRels","attr","split","indexOf","addClass","spacer","text","trim","length","append","generateElement","content","generateIcon","generateScreenReaderLabel","messages","$","extend"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-core/app/packs/src/decidim/external_link.js"],"sourcesContent":["import icon from \"src/decidim/icon\"\n\nconst EXCLUDE_CLASSES = [\n  \"card--list__data__icon\",\n  \"footer-social__icon\",\n  \"logo-cityhall\"\n];\nconst EXCLUDE_ANCESTOR_CLASSES = [\n  \"editor-container\"\n]\nconst EXCLUDE_REL = [\"license\", \"decidim\"];\n\nconst DEFAULT_MESSAGES = {\n  externalLink: \"External link\"\n};\nlet MESSAGES = DEFAULT_MESSAGES;\n\nexport default class ExternalLink {\n  static configureMessages(messages) {\n    MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n  }\n\n  constructor(link) {\n    this.$link = link;\n\n    this.setup();\n  }\n\n  setup() {\n    if (EXCLUDE_CLASSES.some((cls) => this.$link.hasClass(cls))) {\n      return;\n    }\n    if (EXCLUDE_ANCESTOR_CLASSES.some((cls) => this.$link.parents().hasClass(cls))) {\n      return;\n    }\n    if (\n      EXCLUDE_REL.some((rel) => {\n        const linkRels = `${this.$link.attr(\"rel\")}`.split(\" \");\n        return linkRels.indexOf(rel) > -1;\n      })\n    ) {\n      return;\n    }\n\n    this.$link.addClass(\"external-link-container\");\n    let spacer = \"&nbsp;\";\n    if (this.$link.text().trim().length < 1) {\n      // Fixes image links extra space\n      spacer = \"\";\n    }\n    this.$link.append(`${spacer}${this.generateElement()}`);\n  }\n\n  generateElement() {\n    let content = `${this.generateIcon()}${this.generateScreenReaderLabel()}`;\n\n    return `<span class=\"external-link-indicator\">${content}</span>`;\n  }\n\n  generateIcon() {\n    return icon(\"external-link\");\n  }\n\n  generateScreenReaderLabel() {\n    return `<span class=\"show-for-sr\">(${MESSAGES.externalLink})</span>`;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}