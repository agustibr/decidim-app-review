{"ast":null,"code":"import { EmojiButton } from \"@joeattardi/emoji-button\"; // eslint-disable-next-line require-jsdoc\n\nexport default function addInputEmoji() {\n  var containers = document.querySelectorAll(\"[data-input-emoji]\");\n\n  if (containers.length) {\n    containers.forEach(function (elem) {\n      var _elem$closest;\n\n      var picker = new EmojiButton({\n        position: \"bottom-end\",\n        rootElement: ((_elem$closest = elem.closest(\"form\")) === null || _elem$closest === void 0 ? void 0 : _elem$closest.parentElement) || document.body,\n        zIndex: 2000\n      }); // if the selector is inside a modal window\n      // this allows shows the emoji menu uncut\n\n      var reveal = elem.closest(\"[data-reveal]\");\n\n      if (reveal) {\n        reveal.style.overflowY = \"unset\";\n      }\n\n      var wrapper = document.createElement(\"div\");\n      wrapper.className = \"emoji__container\";\n      var btnContainer = document.createElement(\"div\");\n      btnContainer.className = \"emoji__trigger\";\n      var btn = document.createElement(\"div\");\n      btn.className = \"emoji__button\";\n      btn.innerHTML = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"smile\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 496 512\"><path fill=\"currentColor\" d=\"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z\"></path></svg>';\n      var parent = elem.parentNode;\n      parent.insertBefore(wrapper, elem);\n      wrapper.appendChild(elem);\n      wrapper.appendChild(btnContainer);\n      btnContainer.appendChild(btn); // The form errors need to be in the same container with the field they\n      // belong to for Foundation Abide to show them automatically.\n\n      parent.querySelectorAll(\".form-error\").forEach(function (el) {\n        return wrapper.appendChild(el);\n      });\n\n      var handlerPicker = function handlerPicker() {\n        picker.togglePicker(btnContainer);\n      };\n\n      btnContainer.addEventListener(\"click\", handlerPicker);\n      elem.addEventListener(\"characterCounter\", function (event) {\n        if (event.detail.remaining >= 4) {\n          btnContainer.addEventListener(\"click\", handlerPicker);\n          btnContainer.removeAttribute(\"style\");\n        } else {\n          btnContainer.removeEventListener(\"click\", handlerPicker);\n          btnContainer.setAttribute(\"style\", \"color:lightgrey\");\n        }\n      });\n      picker.on(\"emoji\", function (_ref) {\n        var emoji = _ref.emoji;\n        elem.value += \" \".concat(emoji, \" \");\n        var event = new Event(\"emoji.added\");\n        elem.dispatchEvent(event);\n      });\n    });\n  }\n}\n;","map":{"version":3,"mappings":"AAAA,SAAQA,WAAR,QAA0B,0BAA1B,C,CAEA;;AACA,eAAe,SAASC,aAAT,GAAyB;EACtC,IAAMC,UAAU,GAAGC,QAAQ,CAACC,gBAATD,CAA0B,oBAA1BA,CAAnB;;EAEA,IAAID,UAAU,CAACG,MAAf,EAAuB;IACrBH,UAAU,CAACI,OAAXJ,CAAmB,UAACK,IAAD,EAAU;MAAA;;MAC3B,IAAMC,MAAM,GAAG,IAAIR,WAAJ,CAAgB;QAC7BS,QAAQ,EAAE,YADmB;QAE7BC,WAAW,EAAE,sBAAI,CAACC,OAALJ,CAAa,MAAbA,iEAAsBK,aAAtB,KAAuCT,QAAQ,CAACU,IAFhC;QAG7BC,MAAM,EAAE;MAHqB,CAAhB,CAAf,CAD2B,CAO3B;MACA;;MACA,IAAMC,MAAM,GAAGR,IAAI,CAACI,OAALJ,CAAa,eAAbA,CAAf;;MACA,IAAIQ,MAAJ,EAAY;QACVA,MAAM,CAACC,KAAPD,CAAaE,SAAbF,GAAyB,OAAzBA;MACD;;MAED,IAAMG,OAAO,GAAGf,QAAQ,CAACgB,aAAThB,CAAuB,KAAvBA,CAAhB;MACAe,OAAO,CAACE,SAARF,GAAoB,kBAApBA;MACA,IAAMG,YAAY,GAAGlB,QAAQ,CAACgB,aAAThB,CAAuB,KAAvBA,CAArB;MACAkB,YAAY,CAACD,SAAbC,GAAyB,gBAAzBA;MACA,IAAMC,GAAG,GAAGnB,QAAQ,CAACgB,aAAThB,CAAuB,KAAvBA,CAAZ;MACAmB,GAAG,CAACF,SAAJE,GAAgB,eAAhBA;MACAA,GAAG,CAACC,SAAJD,GAAgB,6rBAAhBA;MAEA,IAAME,MAAM,GAAGjB,IAAI,CAACkB,UAApB;MACAD,MAAM,CAACE,YAAPF,CAAoBN,OAApBM,EAA6BjB,IAA7BiB;MACAN,OAAO,CAACS,WAART,CAAoBX,IAApBW;MACAA,OAAO,CAACS,WAART,CAAoBG,YAApBH;MACAG,YAAY,CAACM,WAAbN,CAAyBC,GAAzBD,EA1B2B,CA4B3B;MACA;;MACAG,MAAM,CAACpB,gBAAPoB,CAAwB,aAAxBA,EAAuClB,OAAvCkB,CAA+C,UAACI,EAAD;QAAA,OAAQV,OAAO,CAACS,WAART,CAAoBU,EAApBV,CAAR;MAA/C;;MAEA,IAAIW,aAAa,GAAG,SAAhBA,aAAgB,GAAY;QAC9BrB,MAAM,CAACsB,YAAPtB,CAAoBa,YAApBb;MADF;;MAIAa,YAAY,CAACU,gBAAbV,CAA8B,OAA9BA,EAAuCQ,aAAvCR;MAEAd,IAAI,CAACwB,gBAALxB,CAAsB,kBAAtBA,EAA0C,UAACyB,KAAD,EAAW;QACnD,IAAIA,KAAK,CAACC,MAAND,CAAaE,SAAbF,IAA0B,CAA9B,EAAiC;UAC/BX,YAAY,CAACU,gBAAbV,CAA8B,OAA9BA,EAAuCQ,aAAvCR;UACAA,YAAY,CAACc,eAAbd,CAA6B,OAA7BA;QAFF,OAGO;UACLA,YAAY,CAACe,mBAAbf,CAAiC,OAAjCA,EAA0CQ,aAA1CR;UACAA,YAAY,CAACgB,YAAbhB,CAA0B,OAA1BA,EAAmC,iBAAnCA;QACD;MAPH;MAWAb,MAAM,CAAC8B,EAAP9B,CAAU,OAAVA,EAAmB,gBAAa;QAAA,IAAX+B,KAAW,QAAXA,KAAW;QAC9BhC,IAAI,CAACiC,KAALjC,eAAkBgC,KAAlB;QAEA,IAAMP,KAAK,GAAG,IAAIS,KAAJ,CAAU,aAAV,CAAd;QACAlC,IAAI,CAACmC,aAALnC,CAAmByB,KAAnBzB;MAJF;IAjDF;EAwDD;AACF;AAAA","names":["EmojiButton","addInputEmoji","containers","document","querySelectorAll","length","forEach","elem","picker","position","rootElement","closest","parentElement","body","zIndex","reveal","style","overflowY","wrapper","createElement","className","btnContainer","btn","innerHTML","parent","parentNode","insertBefore","appendChild","el","handlerPicker","togglePicker","addEventListener","event","detail","remaining","removeAttribute","removeEventListener","setAttribute","on","emoji","value","Event","dispatchEvent"],"sources":["/home/agustibr/.asdf/installs/ruby/3.0.2/lib/ruby/gems/3.0.0/bundler/gems/decidim-a25b5c74f78d/decidim-core/app/packs/src/decidim/input_emoji.js"],"sourcesContent":["import {EmojiButton} from \"@joeattardi/emoji-button\";\n\n// eslint-disable-next-line require-jsdoc\nexport default function addInputEmoji() {\n  const containers = document.querySelectorAll(\"[data-input-emoji]\");\n\n  if (containers.length) {\n    containers.forEach((elem) => {\n      const picker = new EmojiButton({\n        position: \"bottom-end\",\n        rootElement: elem.closest(\"form\")?.parentElement || document.body,\n        zIndex: 2000\n      });\n\n      // if the selector is inside a modal window\n      // this allows shows the emoji menu uncut\n      const reveal = elem.closest(\"[data-reveal]\")\n      if (reveal) {\n        reveal.style.overflowY = \"unset\"\n      }\n\n      const wrapper = document.createElement(\"div\");\n      wrapper.className = \"emoji__container\"\n      const btnContainer = document.createElement(\"div\");\n      btnContainer.className = \"emoji__trigger\"\n      const btn = document.createElement(\"div\");\n      btn.className = \"emoji__button\"\n      btn.innerHTML = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"smile\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 496 512\"><path fill=\"currentColor\" d=\"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z\"></path></svg>'\n\n      const parent = elem.parentNode;\n      parent.insertBefore(wrapper, elem);\n      wrapper.appendChild(elem);\n      wrapper.appendChild(btnContainer);\n      btnContainer.appendChild(btn);\n\n      // The form errors need to be in the same container with the field they\n      // belong to for Foundation Abide to show them automatically.\n      parent.querySelectorAll(\".form-error\").forEach((el) => wrapper.appendChild(el));\n\n      let handlerPicker = function () {\n        picker.togglePicker(btnContainer);\n      }\n\n      btnContainer.addEventListener(\"click\", handlerPicker);\n\n      elem.addEventListener(\"characterCounter\", (event) => {\n        if (event.detail.remaining >= 4) {\n          btnContainer.addEventListener(\"click\", handlerPicker);\n          btnContainer.removeAttribute(\"style\");\n        } else {\n          btnContainer.removeEventListener(\"click\", handlerPicker);\n          btnContainer.setAttribute(\"style\", \"color:lightgrey\");\n        }\n      });\n\n\n      picker.on(\"emoji\", ({emoji}) => {\n        elem.value += ` ${emoji} `\n\n        const event = new Event(\"emoji.added\");\n        elem.dispatchEvent(event);\n      });\n    })\n  }\n};\n"]},"metadata":{},"sourceType":"module"}